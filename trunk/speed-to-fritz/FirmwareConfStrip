#!/bin/bash
#strip Firmware.conf 
[ $firmwareconf_file_name ] || firmwareconf_file_name="Firmware.conf"
. ./$firmwareconf_file_name
FWC_FILE="./$firmwareconf_file_name"
echo "#!/bin/bash" > .tmpx
echo "# Date: $(date +%Y%m%d-%H%M)" >> .tmpx
echo "# Script: $Jahr$Monat$Tag-$(svnversion . | tr ":" "_")" >> .tmpx
echo "# Automatically generated and stripped" >> .tmpx
[ "$TCOM_IMG" != "" ] &&  echo "TCOM_IMG=\"$TCOM_IMG\"" >> .tmpx
[ "$AVM_IMG" != "" ] &&  echo "AVM_IMG=\"$AVM_IMG\"" >> .tmpx
[ "$SRC2_IMG" != "" ] &&  echo "SRC2_IMG=\"$SRC2_IMG\"" >> .tmpx
[ "$TYPE_SRC3" != "" ] &&  echo "TYPE_SRC3=\"$TYPE_SRC3\"" >> .tmpx
#sort .tmpx | uniq -u > .tmpx
sed -i -e "/^ *$/d" -e '/#/d' -e '/AVM_.*7/d' -e '/HN_7/d'  -e '/CONGSTAR_/d' -e '/TCOM_W/d' \
-e '/TCOM_SINUS/d' -e '/TCOM_LOCAL/d' -e '/AVM_LOCAL/d' -e '/SRC2_IMG=/d' -e '/SRC3_LOCAL=/d' -e '/TYPE_OR.*/d' "$FWC_FILE"
#sort $FWC_FILE | uniq -u > $FWC_FILE
cat "$FWC_FILE" >> .tmpx
mv .tmpx "$FWC_FILE"
#sed -i -e '/is not set/d' -e '/^$/d' "$FWC_FILE"


