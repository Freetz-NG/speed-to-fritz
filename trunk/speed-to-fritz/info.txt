 Shell script to make your Speedport function like a Fritz!Box
 
Usage: ./sp-to-fritz.sh [OPTIONS] -m MODEL


This script uses binaries in subdirectory  /tools, if you use this on other
LINUX systems as on x86 machines (Intel etc.) compile the tools for your hardware in use.
Source of the tools:  http://trac.freetz.org/browser/trunk/tools  
It is known that not on all system you will be able to use the script without any problem,
Tested systems are andLinux, Stinkylinux, Debian, SuSe, Knoppix, Ubunto.
On some systems you have to add the patch tool (add install patch). 
          
                                                                       
 Call: sudo ./sp-to-fritz.sh to get some info.
 
 OR easy call via single name without parameters.
 
                                                                       
 History:                                                              

    For older info see older script versions!
---------------------------------------------------------------------------------------------------

(Dont remove this line, becaus it is used for autoinserting)
20090113-044605 - Pump up to fritz_box-labor-7270-13362.zip
Jan. 12, 2009
    - 7270 config.in adjusted to LABOR fritz_box-labor-7270-13362.zip
    - In ./includes/icludefunctions -function fileselect unzip option j added, because AVM added 
      path inside zipfile with fritz_box-labor-7270-13362.zip
Jan. 10, 2009
    - svn co https://freetzlinux.svn.sourceforge.net/svnroot/freetzlinux/trunk/speed-to-fritz speed-to-fritz
      can mow be used to checkout the latest revision of "speed-to-fritz"
Jan.  5, 2009
    - GSM display set to always, if GSM firmware is used.
    - Bugfix an workaround for freetz in and W920
    - Busybox version again set to the one used with freetz. Hopefully this time all
    - Firmware will work, if not stay with version 1.1.2008, Not tested.
Jan.  1, 2009
    - Tools busybox set back to 1.10.4. DSL Firmware would not work with newer.
 Dez.  31, 2008
    - W503, dect parameter removed from rc.wlan.
    - Tools dir updated to freetz revision 2944, see comment in install-tools. 
    - Set "Clear mtd3 and mtd4" as selected if "restore original TCOM Firmware"
is selected.
    - Clean up in tools/device_tabe.txt, does not change anything in the result.   
Dez.  30, 2008 
    - W721 config.in adjusted to: 7170 .67 
    - Bugfix W920, VCI VPI
Dez.  29, 2008
    - W920, W721 ATM parameter again fixed, was still buggy, but not tested.
    - Online counter one minir fix on home page, IE had problems.
Dez.  28, 2008
    - W920 W721, add badget page 
Dez.  27, 2008
    - W721 config.in adjusted to: FRITZ.Box_Fon_WLAN_7113.60.04.61.image
    - W920, W721 ATM parameter fixed, but not tested.
Dez.  26, 2008
    - W920 Bug fix in combination with "Option Force Tcom-LED Dreiver"
    - Set FB_HWRevision to 139 for W503
    - defaults for W503 and W721 changed.
    - Add: FRITZ.Box_Fon_WLAN_7170.AnnexA.58.04.59.image 
Dez.  25, 2008
    - W503 tcom firmware link, entered:
http://hilfe.telekom.de/dlp/eki/downloads/503_66.04.65.image
    - W503 more adaptions, not tested. 
Dez.  23, 2008
    - W920 Bug fix in combination with fonmenu and Labor Firmware. 
    - Option copy t-com LED driver now copies libled's and led-crtl as well. 
    - config.in adjusted to: 7270_telefonie/fritz_box-labor-13286.zip
    - ext2 menu option not usable any more. 
Dez.  22, 2008
    - W503 fist script adaptions, downloads for t-com not correct.
Dez.  21, 2008
    - Option added to use Tcom LED driver with W920.
    - Changed file name script date to ISO
    - Entered /dev/fuse into /tools/device_table.txt 
    - Added menu option to select T-com beta .63
    - Removed default ATA-selection in combination with W920    
Dez.  20, 2008
    - Local image selection fixed.
    - Plug-in fix  
 Dez.  19, 2008
    W920:
    - Fixed wrong tcom-firmware since script 20.11.2008
      (All scripts since 20.11.2008 had this bug.)
 Dez.  18, 2008
    - Bugfix, reboots in combination W920 and script 5.12 
      two lines removed.
    - config.in adjusted to:
    - Release_FRITZ.Box_Fon_WLAN_7270.54.04.67.image
    - FRITZ.Box_Fon_WLAN_7270.Labor.54.04.99-13225.image
    - FRITZ.Box_Fon_WLAN_7270.Labor.54.04.97-13253.image
    - FRITZ.Box_Fon_WLAN_7270.Labor.54.04.95-13265.image    
    - FRITZ.Box_Fon_WLAN_7170.Labor.29.04.63-13038.image
 Dez.  05, 2008
     - 7270 config.in adjusted to AiO FRITZ.Box_Fon_WLAN_7270.54.04.67.image
     - W920 config.in adjusted to Speedport_W_920V.AnnexB.65.04.63-13048.zip
 Nov.  21, 2008
     - 7170 config.in adjusted to LABOR AiO fritz_box-labor-13014.
     - 7270 config.in adjusted to LABOR AiO fritz_box-labor-13014.
 Nov.  19, 2008
     - Removed skript copy_alian_to_freetz, use start-freetz!
     - rtc dev enterd into device table
     - Added T-com beta Speedport_W_920V.AnnexB.65.04.63.image
       firmware.
 Nov.  15, 2008
     - 7170 config.in adjusted to LABOR AiO fritz_box-labor-12946.
     - 7270 config.in adjusted to LABOR AiO fritz_box-labor-12946.
 Nov.  12, 2008
     - 7270 config.in adjusted to LABOR AiO fritz_box-labor-12904.
     - default setting changed, clear mtd3 und mtd4" is now default.
 Okt.  26, 2008
     - 7270 config.in adjusted to LABOR AiO fritz_box-labor-12657.
       With this "alles in einem" Firmware AVM introduced a new LED module
       with closed source, so LED configuration no longer is possible until
       t-com comes up with a new Firmware providing a LED module for W920.
       Using the 7270 LED module results in wrong  LED assignments.
       Online LED is now used as Info led.
     
 Okt.  16, 2008    
     - 7170 config.in adjusted to LABOR Ai1 fritz_box-labor-12537.image
     - 7170 config.in adjusted to LABOR DSL fritz_box-labor-12526.image
     - 7270 config.in adjusted to LABOR DSL fritz_box-labor-12606.image
       Pleas read info at AVM page! Important you maut have a other
       firmware instlled in the firast place.
       http://www.avm.de/de/Service/Service-Portale/Service-Portal/Labor/7270_dsl/labor_start_dsl.php
    - W721 VLYNQ parameter taken from 7170 again. 
 Okt.  14, 2008    
    - 7170 config.in adjusted to LABOR AiO fritz_box-labor-12537.zip
    - device-tabel double entry removed.
 Okt.  10, 2008    
    - Some minor script changes, concerning starting with a clean
      emty configuration. Firmware.conf my be deleted if one
      wants to start with default settings.
    - ut-8 in for Rueckwaetssuche fixed. 
    - Option ut-8 deactivated becas is not needed with the 
      latest Ai1 any more.
    - install-tools mit der version 16.09.2008 ersetzt.
    - 7170 config.in adjusted (englsh version) to:
      FRITZ.Box_Fon_WLAN_7170.AnnexA.en.58.04.57.image 
    - 7170 config.in adjusted to LABOR AiO fritz_box-labor-12469.zip
 Okt.  08, 2008
    - Option reuse configuration added, default is now don't reuse
      Firmware.conf Config file, this should prevent that unexperienced 
      users restart with wrong default settings.
      "use t-com piglet" must be on on with this labor version.
    - Mod info page enhanced by some menu options.
    - Fixed missing text on DECT setup page if IE was used. 
    - Fixed one remove of usb on site map page.
    - Added menu option revision number of freetz.
    - Option .58 added for W920, uses final .58 extracted from 
      12397 zip 
      Zip file is not deleted after download, any more 
 Okt.  02, 2008
    - config.in adjusted for 7170-labor-12397 Ai1
    - start-freetz.sh changed to bi conform to the new paths
      used by freetz.
    - 7270 config.in adjusted for .59 Final 
 Okt.  01, 2008
    - Fixed Button text on dsl page with Ai1
 Sept. 30, 2008
    - 7270 config.in adjusted to LABOR 12365 Ai1
 Sept. 24, 2008
    - W721 support added
 Sept. 20, 2008
    - added some devices in /tools/device_table.txt
 Sept. 19, 2008
    - 7270 config.in adjusted to LABOR 12298 Ai1
 Sept. 14, 2008
    - Version 13.09 Bug dect add on was missing, corrected. 
 Sept. 13, 2008
    - Bug fix TR69 and TR64 Option did not work.
    - Bug fix for Option Branding, there was some error if 
      branding was set to something else as avm and W900 was used.
    - Bug fix for dect-update.sh some changes made in the past 
      within speed-to-fritz ware not carried on to dect-update.
 Sept. 12, 2008
    - fon setup page for Ai1 12199 in combination with  W701
      fixed.
    - Option for activating tr69 and tr64 added.
    - Option for setting Branding added. Dot use this new option
      except you really know way. Usual the are never needed.  
 Sept. 09, 2008
    - Kaid Option added, for uses with xbox.
    - Added CLEAR_ENVX, is the same as CLEAR_ENV but uses IP, OEM 
      and LAN settings from the settings made in speed-to-fritz
      menu.
    - Remove dsl (ATA-ONLY) added for W501.
    - Option force clear mtd3 - mtd4 added.
    - Fixed missing text on DECT page if All in one is used.    
 August 31, 2008
    - Fixed W900 DECT Button text in combination with 11945
      and DECT "Zuordnung" 
 August 29, 2008
    - Bug fix W900 handsets menus corrected writing to ut-8,
      Was already fixed in version 16.08.2008,
      But again the old files added upt to 28.08.2008.
    - Some correction on menu item DECT. 
    - Fixed 11500 del firmware if switched between 900 920.
      Only needed because both Firmwares use the same name.
 August 28, 2008
    - Added ATA display into mod info page.
    - Changed the way how firmwares can be specified in Config.in
      It is now possible to add a second local file name or a 
      mirror location within one line inside quotes.
      If a mirror download site is in use the word 'mirror'
      has to be inserted between first file name with zip 
      extension added and download link for the mirror location.
      If first download location is a packed zip, autonmatic
      add of a local filename will take place once it was downloaded. 
 August 26, 2008
    - Changed display of ATA starting page if menu option 
      remove ADSL is used.  
    - Bug fix for start-freetz
 August 23, 2008
    - Support menu entry corrected in combination with freetz
    - Config.in setup for 7170 busht to latest labor version.
    - ISDN msn enabled for remove unusable menus on W701 again.
    - W920 "all in one" internet ata mode page enabled without 
      expert mod on. 
 August 20, 2008
    - Removed setting of HWRevision to the value of AVM firmware
      only if ATA and W920 is enabled via menu options,
      this will be the case now (plugin support of 12043 Firmware 
      needs HWRevison set to the value of AVM 7270 box to resolve 
      the download url for plug ins). 
    - For W920 All in One Option added to remove ADSL completely
      All in one 12043 works well as Router in combination with
      an external modem. Freetz is not usable up to now, firmware
      is usable but routing will not be established if a Freetz
      Firmware based on 12043 is used. 
    - Isdn menu on W701 is removed again if Option in setup menu 
      is set. 

 August 17, 2008
    - add expert dsl settings via option in setup menu
    - Fixed defaults for W501 in menu (pip-tone on fon1 with wrong
      options)
    - Removes unusable ISDN option menus form web GUI 
      for 'all in one' in combination with W701
    - fritz_box-labor-12043.zip added
    - Some text changed for ut8 char-set, bug fix for 11945

 August 13, 2008
    - all in one added (not tested some text will not be removed)
    - as with earlier versions

 August 07, 2008
    - Bug fix Tam removable now AVM Bug fixed in all in one
    - Some adjustments to adopt to future "all in one"
    - structures with language database instead of inc files
    - Some German special char replaced with oe, ae, ue, ss,
    - because all in one uses different method for special char.
   
 July 23, 2008
    - some minor bug fix for start-freetz
    - W920 option copy bin files added, to be able to us it with
    - limited functionality to enable adsl2
    - COPY_TCOM_BIN "Keep 3 tcom libs to enable adsl2"
    - COPY_TCOM_BIN2 "Keep all TCOM bin, sbin, lib"
    
 July 20, 2008
    - Automatic remove of labor firmware 11500 if it was for 
    - different model before (7170 or 7270) 
    - W501 restricted to use t-com fon driver only
    - added mirror download for old .43 Firmware
    - mirror download for W920 Firmware added
 July 19, 2008
    - W501 minor bug fix err. missing file, W920 AVM version 
    - set to .58 
 July 19, 2008
    - W920, added missing gifs, and power led fixed 
    - Added Option replace assistant menu-item with enhanced settings
    - Service portal link added
    - Use of fon driver from 3rd Firmware for Sinus 500 fixed
    - Test Option XCHANGE_KERNEL added, this can be used with 
    - option restore original firmware as well. 
 July 15, 2008
    - Bugfix W920, Speedport920 tiping error corrected
    - W701 in combination with 3rd Firmware produced error last 
    - in version, fixed
 July 14, 2008
    - W920 is now without reboots.
    - W920 only annex VB is supported, by AVM vdsl driver at the moment.
    - First flash of firmware in case of W920 must be with FTP!
    - Looks like oem tcom must be used to get functional VDSL,
    - see discussion for more details.
    - Add Option support, bug fix 11500
    - Bug fix copy 3rd source WEB menu 
 July 07, 2008
    - LABOR MINI enabled via Config.in
    - Option use 3rd source FON driver added for Sinus 500
 July 04, 2008
    - mksqushfs tool updated now up to date with freetz
    - tools can now be compiled for different systems,
    - run 'make toolsdirclean' and 'make tools'
    - or ./install-tools 
    - to install for your system 
 Jun 28, 2008
    - Fakeroot fixed, now script can be run without root rights
 Jun 26, 2008
    - Fixed, Product Name could not be changed via menu 
    
 Jun 26, 2008
    - First attempt to make the script usable for W920
 Jun 16, 2008
    - Gaming labor was not set correctly
    - Same changes on start-freetz.sh freetz-config preset to 
    -settings made in speed2freetz  
 Jun 13, 2008
    - Link address for labor gaming set to 11435
    - start-freetz.sh some minor changes, last patch included
    -  
 Jun 11, 2008
    - Some minor fixes to so start-freetz.sh will do a complete job again.
    - Tipping corrected by ernest015
    - Added 'install-start' to start the first time if some tools are missing.
    - Added 'start' to start on systems without root permission. 
 Jun 10, 2008
    - Bug fix, pushmail, W701, Bug fix start-freetz.sh 
    - Default Firmwae.conf is now automatically generated
    - All old startfile and config files removed!
    - make menu config added type ./start.sh to start menu config
    - Old type config files can still be used but must be added.
    - If download firmware address change in future the have to be 
    - edited in Config.in file.
    - Config. in has a single line entry for each possible Firmware,
    - and this information is used the for all generated config files.
    - Reverse look up minor problem with double icons is not fixed jet.
    - Scrpit version is still 06.06.2008
-------------------------------------------------------------------


1. Calling lists can't be transferred to some DECT Handsets, Only Sinus 500i will store information on the handsets.
   Only Swissvoice Eurit 547/557/567/577. Handsets will give the complete functionality.
    

For more information please read the corresponding threads at the IP Forum.
For each type of router there is a active thread, there you can post problems, and hopefully find answers.

