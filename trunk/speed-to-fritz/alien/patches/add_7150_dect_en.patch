--- fon_config/fon_config_Dect_1.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_1.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,8 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<? repeat [ 0 5 ] `
+<input type="hidden" name="dect:settings/Handset$0/Subscribed" value="<? query dect:settings/Handset$0/Subscribed ?>" id="uiPostHandset$0Subscribe" disabled>
+<input type="hidden" name="dect:settings/Handset$0/Type" value="<? query dect:settings/Handset$0/Type ?>" id="uiPostHandset$0Type" disabled>
+<input type="hidden" name="dect:settings/Handset$0/Name" value="<? query dect:settings/Handset$0/Name ?>" id="uiPostHandset$0Notation" disabled>
+` ?>
+<input type="hidden" name="telcfg:settings/DialPort" value="<? query telcfg:settings/DialPort ?>" id="uiPostDialPort" disabled>
+<input type="hidden" name="telcfg:command/Dial" value="" id="uiPostDial" disabled>
--- fon_config/fon_config_Dect_1.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_1.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,29 @@
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:Txt1 ?>
+</div></div></div></div></div></div>
+<div class="backdialog" id="uiView_FonConfig"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb5"><? echo $var:Txt2 ?></p>
+<p class="mb10"><? echo $var:Txt3 ?></p>
+<p class="ml5 mb10 fett">
+<? echo $var:Txt14 ?>
+</p>
+<table class="ml20" id="uiShowTableHeader" style="display:none;">
+<colgroup>
+<col width="30px">
+<col >
+<col >
+</colgroup>
+<tr class="fett"><td>&nbsp;</td><td style="padding-left:10px;"><? echo $var:Txt4 ?></td><td style="padding-left:30px;"><? echo $var:Txt5 ?></td></tr>
+<? multiquery dect:settings/Handset/list(Subscribed,Type,Name) `
+<script type="text/javascript">document.write(TrDectDevice( "DeviceFonExt$0", $0, "$2", "$3","$4"));</script>
+` ?>
+</table>
+<p class="acx" id="uiShowNoDectText" style="display:none"><? echo $var:Txt6 ?></p>
+<p class="mt10 mb5" id="uiShowNoRegister" style="display:none"><? echo $var:Txt12 ?></p>
+<div style="text-align:right; style="display:none"; class="mt10">
+<input type="button" onclick="uiDoSelectNewDevice((0))" value="<? echo $var:Txt9 ?>" class="Pushbutton" id="uiShowRadioBtnNewRegister" style="width:230px;">
+</div>
+</div></div></div></div></div></div>
+<? include ../html/de/fon_config/rbb_backokcancel.html ?>
+</div>
--- fon_config/fon_config_Dect_1.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_1.inc	2008-05-21 12:02:00.000000000 -0400
@@ -0,0 +1,13 @@
+<? include ../html/de/global.inc ?>
+<? setvariable var:Txt1 "DECT setup" ?>
+<? setvariable var:Txt2 "To setup a DECT Device, the device must be registered at the base station." ?>
+<? setvariable var:Txt3 "The following table shows all rergistered DECT devices. Attention if you change settings throuh clicking and editting on a individual entry, all earlyer settings are lost." ?>
+<? setvariable var:Txt4 "ID" ?>
+<? setvariable var:Txt6 "No DECT device is registered at this base station." ?>
+<? setvariable var:Txt7 'Klick on the table entry to change settings.' ?>
+<? setvariable var:Txt8 " " ?>
+<? setvariable var:Txt9 "Register new DECT device" ?>
+<? setvariable var:Txt11 'If the device is not shown in the table, then klick on ' ?>
+<? setvariable var:Txt12 "Teh maximal number of devicees ia reached." ?>
+<? setvariable var:Txt14 "registered DECT devices" ?>
+<? setvariable var:Txt5 "Typ" ?>
--- fon_config/fon_config_Dect_1.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_1.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,155 @@
+<!-- ../fon_config/fc_fon_1.js -->
+<? include ../html/de/fon_config/fon_config_Dect_1.inc ?>
+<style type="text/css">
+<!--
+#content {width: 540px; margin: auto;}
+ol {
+list-style-type: decimal;
+margin: 0px 10px 0px 30px;
+padding: 0px;
+}
+.mt10 {margin-top: 10px;}
+.pCheck50 {text-indent: -20px; padding-left: 50px;}
+.left_35 {text-align: right; margin-top: 10px;}
+.acx {text-align: center; background-color:#FFFFFF; border: 1px solid #C6C7BE; }
+.acx2 {font-size: 12px; text-align: left; text-indent: 52px; font-weight: bold; background-color:#FFFFFF; border: 2px solid #FFFFFF; }
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+var g_txtBtnToDo = "Setup";
+var g_txtIsDectID1 = "DECT with ";
+var g_txtIsDectID2 = "ID ";
+var g_txtSwissVoice = "AVM-compatibel";
+var g_txtGAPDevice = "GAP-standard";
+var g_txtMld_NoDeviceSelected = "No selection was made!\x0d\x0a\x0d\x0a selecte a device from the table or \"regitere a new DECT device\" aus !";
+var g_txtMld_NoDeviceSelected2 = "No selection was made!\x0d\x0a\x0d\x0aSelect aDECT device!";
+var g_nDectDeviceCount = 0;
+var g_nCurrentSelectID = -1;
+var g_nCurrentSelectDectUserID = -1;
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Txt1` ?>";
+jslDisplay( "uiShowNoDectText", (g_nDectDeviceCount == 0));
+jslDisplay( "uiShowTableHeader", (g_nDectDeviceCount > 0));
+if ( g_nDectDeviceCount == 6) {
+jslDisplay( "uiShowNoRegister", true);
+//jslDisplay( "uiShowRadioBtnNewRegister", true);
+//jslDisable( "uiViewRadioBtnNewRegister");
+} else {
+if ((jslGetValue( "uiDectDeviceCount") == "") ||
+(g_nDectDeviceCount == parseInt(jslGetValue( "uiDectDeviceCount")))) {
+//jslDisplay( "uiShowNormalRegister", true);
+//jslDisplay( "uiShowRadioBtnNewRegister", true);
+//jslSetChecked("uiViewRadioBtnNewRegister", 1);
+//uiDoSelectDevice(0);
+}
+}
+if ( jslGetValue( "uiDectID") != "") {
+var nID = parseInt( jslGetValue( "uiDectID"))+1;
+uiDoSelectDevice( nID);
+jslSetChecked( "uiViewRadioBtn"+(nID-1), true);
+}
+jslSetEnabled("uiBtnOK", (g_nCurrentSelectID != -1));
+}
+function uiDoBack() {
+jslGoTo("fon_config", "fon_config_1");
+}
+function uiDoOk() {
+if ( g_nCurrentSelectID == (-1)) {
+if ((jslGetValue( "uiDectDeviceCount") == "") ||
+(g_nDectDeviceCount == parseInt(jslGetValue( "uiDectDeviceCount")))) {
+alert( g_txtMld_NoDeviceSelected);
+} else {
+alert( g_txtMld_NoDeviceSelected2);
+}
+} else if ( g_nCurrentSelectID == 0) {
+jslSetValue( "uiDectDeviceCount", g_nDectDeviceCount);
+jslGoTo("fon_config", "fon_config_Dect_register_1")
+} else {
+jslSetValue( "uiDectID", g_nCurrentSelectID-1);
+jslSetValue( "uiDectUserID", g_nCurrentSelectDectUserID);
+jslSetValue("uiPostDial", "**50");
+jslSetValue("uiPostDialPort", "50");
+jslEnable("uiPostDial");
+jslEnable("uiPostDialPort");
+jslFormSubmitEx("fon_config", "fon_config_Dect_test");
+//jslFormSubmitEx("fon_config", "fon_config_Dect_2");
+}
+}
+function uiDoSelectNewDevice( idValue)
+{
+uiDoSelectDevice(0);
+uiDoOk();
+}
+function uiDoSelectDevice( idValue) {
+g_nCurrentSelectID = idValue;
+jslSetEnabled("uiBtnOK", (g_nCurrentSelectID != -1));
+}
+function uiDoCancel() {
+if (!AskAssiCancel()) return;
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else if(FonAssiFromPageValue== "fonstartmenu"){
+jslGoTo("home", "fondevices");
+return;
+}else if(FonAssiFromPageValue== "fonerweitert"){
+jslGoTo("fon", "fondevices");
+return;
+}
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+function TrDectDevice( id, dectID, isSubscribed, isType, deviceName) {
+if ( isSubscribed == "0") return "";
+g_nDectDeviceCount++;
+var str = "<tr><td id=\"ui"+id+"\">";
+str += "<input type=\"radio\" name=\"Device\" id=\"uiViewRadioBtn" + dectID + "\" onClick=\"uiDoSelectDevice( " + (dectID+1) + ")\"></td>";
+str += "<td style=\"padding-left:10px;\"><label for=\"uiViewRadioBtn" + dectID +"\">"+g_txtIsDectID1+"<b>"+g_txtIsDectID2+(dectID+1)+"</b></label></td>";
+str += "<td style=\"padding-left:30px;\">";
+if ( isType == "1") {
+str += "<b>" + g_txtSwissVoice + "</b>";
+} else {
+str += g_txtGAPDevice;
+}
+str += "</td></tr>";
+return str;
+}
+function ToDoBtn(id, click) {
+return IconBtn(id, click, g_txtBtnToDo, ""); //"../html/de/images/loeschen.gif");
+}
+function IconBtn(id, click, value, pic) {
+if ( pic == "") {
+return "<button type=\"button\" id=\""+id+"\" onclick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width:80px\">" + value + "</button>";
+} else {
+return "<button type=\"button\" id=\""+id+"\" onclick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width:30px\"><img src=\""+pic+"\" align=\"bottom\" width=\"16\" height=\"16\" hspace=\"4\"></button>";
+}
+}
+function FonControlUserEntry ( UserNId, FonControlUserId, UserName) {
+this.nUserNId = UserNId;
+this.nFonControlUserId = FonControlUserId;
+this.szUserName = UserName;
+}
+var g_FonControlUserInfoList= new Array();
+var g_FonControlUserInfoListCnt=0;
+function AddFonControlUserToUserList(UserNId,FonControlUserId,UserName)
+{
+g_FonControlUserInfoList[UserNId]= new FonControlUserEntry( UserNId,FonControlUserId,UserName);
+g_FonControlUserInfoListCnt++;
+}
+function GetFonControlUserEntry(FonControlUserId)
+{
+for ( var j=0; j<g_FonControlUserInfoListCnt; j++) {
+if(g_FonControlUserInfoList[j].nFonControlUserId==FonControlUserId)
+return g_FonControlUserInfoList[j];
+}
+return null;
+}
+</script>
--- fon_config/fon_config_Dect_2.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_2.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,24 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<input type="hidden" name="dect:settings/MSN0/MSN" value="<? query dect:settings/MSN0/MSN ?>" id="uiPostDectMsn0" disabled>
+<input type="hidden" name="dect:settings/MSN1/MSN" value="<? query dect:settings/MSN1/MSN ?>" id="uiPostDectMsn1" disabled>
+<input type="hidden" name="dect:settings/MSN2/MSN" value="<? query dect:settings/MSN2/MSN ?>" id="uiPostDectMsn2" disabled>
+<input type="hidden" name="dect:settings/MSN3/MSN" value="<? query dect:settings/MSN3/MSN ?>" id="uiPostDectMsn3" disabled>
+<input type="hidden" name="dect:settings/MSN4/MSN" value="<? query dect:settings/MSN4/MSN ?>" id="uiPostDectMsn4" disabled>
+<? if eq '$var:usePSTN' 1 `
+<input type="hidden" name="telcfg:settings/MSN/MSN0" value="<? query telcfg:settings/MSN/MSN0 ?>" id="uiMsn0" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN1" value="<? query telcfg:settings/MSN/MSN1 ?>" id="uiMsn1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN2" value="<? query telcfg:settings/MSN/MSN2 ?>" id="uiMsn2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN3" value="<? query telcfg:settings/MSN/MSN3 ?>" id="uiMsn3" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN4" value="<? query telcfg:settings/MSN/MSN4 ?>" id="uiMsn4" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN5" value="<? query telcfg:settings/MSN/MSN5 ?>" id="uiMsn5" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN6" value="<? query telcfg:settings/MSN/MSN6 ?>" id="uiMsn6" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN7" value="<? query telcfg:settings/MSN/MSN7 ?>" id="uiMsn7" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN8" value="<? query telcfg:settings/MSN/MSN8 ?>" id="uiMsn8" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN9" value="<? query telcfg:settings/MSN/MSN9 ?>" id="uiMsn9" disabled>
+<input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPots" disabled>
+<input type="hidden" name="telcfg:settings/MSN/NTDefault" value="<? query telcfg:settings/MSN/NTDefault ?>" id="uiPostNTDefault" disabled>
+` ?>
+<? multiquery sip:settings/sip/list(displayname,ID) '
+<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="ui$1" disabled>
+<input type="hidden" name="sip:settings/$1/ID" value="$3" id="ui$1ID" disabled>
+' ?>
--- fon_config/fon_config_Dect_2.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_2.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,29 @@
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:Txt1 ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10" style="display: none" id="uiViewOnlyOneNetType"><? echo '$var:Txt7' ?></p>
+<ol style="display: none" id="uiViewBothNetType">
+<li class="mb10">
+<p class="mb5"><? echo '$var:Txt2' ?></p>
+<p class="mb5">
+<input type="radio" name="ConnectType" id="uiViewType_Internet" onclick="OnNetwork(0)">
+&nbsp;<label id="uiLabelType_Internet" for="uiViewType_Internet"><? echo '$var:Txt3' ?><b><? echo '$var:Txt4' ?></b><? echo '$var:Txt6' ?></label>
+</p>
+<p class="mb5">
+<input type="radio" name="ConnectType" id="uiViewType_Festnetz" onclick="OnNetwork(1)">
+&nbsp;<label id="uiLabelType_Festnetz" for="uiViewType_Festnetz"><? echo '$var:Txt3' ?><b><? echo '$var:Txt5' ?></b><? echo '$var:Txt6' ?></label>
+</p>
+</li>
+<li class="mb5">
+<p><? echo '$var:Txt7' ?></p>
+</li>
+</ol>
+<p class="ml30">
+<select id="uiViewInternetNo" class="Eingabefeld" style="width:200px; display: none"></select>
+<select id="uiViewFestnetzNo" class="Eingabefeld" style="width:200px; display: none"></select>
+</p>
+</div></div></div></div></div></div>
+<? include ../html/de/fon_config/rbb_backokcancel.html ?>
+</div>
--- fon_config/fon_config_Dect_2.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_2.inc	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,10 @@
+<? include ../html/de/global.inc ?>
+<? setvariable var:Txt1 "Register DECT devicees for incomming calls" ?>
+<? if eq '$var:usePSTN' 1 `
+<? setvariable var:Txt2 "Setup internet call or fixed subscriberline." ?>
+` ?>
+<? setvariable var:Txt3 "outgoing calls are made via " ?>
+<? setvariable var:Txt4 "Internet" ?>
+<? setvariable var:Txt5 "Subscriberline" ?>
+<? setvariable var:Txt6 " " ?>
+<? setvariable var:Txt7 "Decide witch number is used for outgoing calls." ?>
--- fon_config/fon_config_Dect_2.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_2.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,271 @@
+<!-- ../fon_config/fon_config_Dect_2.js -->
+<? include ../html/de/fon_config/fon_config_Dect_2.inc ?>
+<style type="text/css">
+<!--
+ol {
+list-style-type: decimal;
+margin: 0px 10px 0px 30px;
+padding: 0px;
+}
+.ml30 { margin-left: 30px; }
+.pCheck25 {text-indent: -25px; padding-left: 35px;}
+.pFett {font-weight: bold; margin-bottom: 10px;}
+#tDectMsns {margin-left: 40px; width: 400px; table-layout: fixed;}
+#tDectMsns td {padding: 1px 3px; overflow: hidden;}
+.c1 {text-align: left; width: 75px;}
+.c2 {text-align: left; width: 25px;}
+.c3 {text-align: left; width: 250px;}
+.c4 {text-align: left; width: 275px;}
+.ac {text-align: center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/val.js ?>
+<? include ../html/de/js/jsl.js ?>
+var g_txt_Network_Internet = "Internet";
+var g_txt_Network_Festnetz = "Subscriberline";
+var g_txt_Internet = "Internet";
+var g_txt_Festnetz = "Subscriberline";
+var g_txt_OutgoingingNo = "(Callnumber for outgoing calls)";
+var g_txt_ToMuchMsns = "Only 5 numbers can be setup for DECT devices. !\x0d\x0aThe maximum of 5 Numbers is reached!\x0d\x0a\x0d\x0aIf you want to setup an other Number you must first remove a device and set it up again.";
+var g_SelectMsnCount = 0;
+var g_arSelectableMsns = new Array();
+var g_arDectMsns = new Array();
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Txt1` ?>";
+var msnIndex = 0;
+<? multiquery sip:settings/sip/list(displayname,ID) `
+if (valIsZahlVorhanden("$2")) {
+g_arSelectableMsns[msnIndex] = new MsnEntry( msnIndex, "$0", "SIP$3", "$2", g_txt_Internet, IsAlreadyDectMsn( "$2"));
+msnIndex++;
+}
+` ?>
+<? if eq '$var:usePSTN' 1 `
+for (var i=0; i<10; i++) {
+if (jslGetValue("uiPostMsn"+i) != "") {
+g_arSelectableMsns[msnIndex] = new MsnEntry( msnIndex, i, jslGetValue("uiPostMsn"+i), jslGetValue("uiPostMsn"+i), g_txt_Festnetz, IsAlreadyDectMsn( jslGetValue("uiPostMsn"+i)));
+msnIndex++;
+}
+}
+if (jslGetValue("uiPostPots") != "") {
+g_arSelectableMsns[msnIndex] = new MsnEntry( msnIndex, i, jslGetValue("uiPostPots"), jslGetValue("uiPostPots"), g_txt_Festnetz, IsAlreadyDectMsn( jslGetValue("uiPostPots")));
+msnIndex++;
+}
+` ?>
+for ( var j=0; j<5; j++) {
+g_arDectMsns[j] = new DectEntry( false,jslGetValue( "uiPostDectMsn"+j),GetNetworkType(jslGetValue( "uiPostDectMsn"+j)),false);
+if ( jslGetValue( "uiPostDectMsn"+j) != "") {
+jslSetSpanText( "uiNameMsn"+j+"Checked", GetMsnName(j));
+jslSetSpanText( "uiNetworkMsn"+j+"Checked", GetNetworkType(jslGetValue( "uiPostDectMsn"+j))+ ": "+ jslGetValue( "uiPostDectMsn"+j));
+if ((jslGetValue("uiDeviceAllInCalls") != "" ) && ( IsConfiguredDectMsn(jslGetValue( "uiPostDectMsn"+j)) == true)) {
+jslSetChecked("uiView_CheckMsn"+j,true)
+g_arDectMsns[j].checked = true;
+}
+jslDisplay( "uiMsn"+j+"Checked", true);
+g_arDectMsns[j].checkBox = true;
+} else {
+jslSetSpanText( "uiNameMsn"+j+"Selection", GetMsnName(j));
+jslDisplay( "uiMsn"+j+"Selection", true);
+FillSelection("uiView_Selection"+j, "")
+g_arDectMsns[j].value = "Leer";
+}
+}
+if ( jslGetValue("uiDeviceAllInCalls") != "" ) {
+for ( var k=0;k<g_arDectMsns.length;k++) {
+if (g_arDectMsns[k].checkBox == false) {
+nValue = GetConfiguredDectMsn();
+if ( nValue != "") {
+OnChangeSelection( k,nValue);
+}
+}
+}
+}
+}
+function uiDoOk() {
+var strShowInCallNo = "";
+var saveMsnCount = 0;
+for (var i=0; i<g_arDectMsns.length; i++) {
+if ( g_arDectMsns[i].checkBox == true) {
+if (( g_arDectMsns[i].checked == true) && ( jslGetValue("uiDeviceOutgoingNo") != g_arDectMsns[i].value)) {
+jslSetValue( "uiDeviceMsn" + saveMsnCount, g_arDectMsns[i].value);
+strShowInCallNo += GetDectArrayValue(g_arDectMsns[i])+";"+GetDectArrayNetType(g_arDectMsns[i])+";";
+saveMsnCount +=1;
+}
+} else {
+if (jslGetValue( "uiView_Selection"+i) != "Leer"){
+jslSetValue( "uiDeviceMsn" + saveMsnCount, jslGetValue( "uiView_Selection"+i));
+strShowInCallNo += GetDisplayNumber(jslGetValue( "uiView_Selection"+i))+";"+GetNetworkType(jslGetValue( "uiView_Selection"+i))+";";
+saveMsnCount +=1;
+}
+}
+}
+jslSetValue( "uiDeviceAllInCalls", "0");
+jslSetValue( "uiShowCallInNo", strShowInCallNo);
+// jslSetValue( "uiDectDeviceCount", g_arDectMsns.length);
+jslGoTo("fon_config", "fon_config_Dect_3");
+}
+function OnChangeCheckMsn(nIdx) {
+g_arDectMsns[nIdx].checked = jslGetChecked("uiView_CheckMsn" +nIdx);
+}
+function OnChangeSelection(nId, nValue) {
+var oldValue = GetDectArrayValue(g_arDectMsns[nId]);
+var oldNo = GetDisplayNumber( oldValue);
+var oldNetType = GetNetworkType( oldValue);
+for ( var i=0;i<g_arDectMsns.length;i++) {
+if ((g_arDectMsns[i].checkBox == false) && ( i != nId)){
+if ( nValue == "Leer") {
+addOption("uiView_Selection"+i,oldValue,(oldNetType+": "+oldNo));
+} else {
+ReorganizeSelections( i, nValue, oldValue, (oldNetType+": "+oldNo));
+}
+}
+}
+g_arDectMsns[nId].value = nValue;
+for ( var j=0;j<g_arDectMsns.length;j++) {
+if (g_arDectMsns[j].checkBox == false) {
+jslSetSelection("uiView_Selection"+j,GetDectArrayValue(g_arDectMsns[j]))
+}
+}
+}
+function ReorganizeSelections (nIdx, newValue, oldValue, oldText) {
+var selObj = document.getElementById("uiView_Selection"+nIdx)
+for ( var j=0; j<selObj.length;j++) {
+if ( selObj.options[j].value == newValue) {
+if ( oldValue == "Leer") {
+selObj.options[j] = null;
+} else {
+selObj.options[j].value = oldValue;
+selObj.options[j].text = oldText;
+}
+break;
+}
+}
+}
+function GetMsnName(nIdx) {
+var strRetCode ="";
+switch (nIdx) {
+case 0 : strRetCode ="Msn A ";break;
+case 1 : strRetCode ="Msn B ";break;
+case 2 : strRetCode ="Msn C ";break;
+case 3 : strRetCode ="Msn D ";break;
+case 4 : strRetCode ="Msn E ";break;
+}
+return strRetCode;
+}
+function FillSelection(id, nr) {
+addOption(id, "Leer", "");
+for ( var i=0;i<g_arSelectableMsns.length;i++) {
+if (GetMsnArrayIsDectMsn(g_arSelectableMsns[i]) == false) {
+addOption( id, GetMsnArrayValue(g_arSelectableMsns[i]), (GetMsnArrayNetType(g_arSelectableMsns[i])+": "+GetMsnArrayNo(g_arSelectableMsns[i])));
+}
+}
+jslSetSelection(id, nr=="" ? "Leer":nr);
+}
+function addOption (id, val, text) {
+var element;
+element = document.getElementById(id);
+if (element == null) return;
+var eintrag = new Option(text, val, false, false);
+element.options[element.length]=eintrag;
+}
+function GetDisplayNumber( wert) {
+if ( wert == "Leer") return "";
+for ( var i=0;i<g_arSelectableMsns.length;i++) {
+if ( GetMsnArrayValue(g_arSelectableMsns[i]) == wert) {
+return GetMsnArrayNo(g_arSelectableMsns[i]);
+}
+}
+return ""
+}
+function GetNetworkType( wert) {
+if ( wert == "Leer") return "";
+for ( var i=0;i<g_arSelectableMsns.length;i++) {
+if ( GetMsnArrayValue(g_arSelectableMsns[i]) == wert) {
+return GetMsnArrayNetType(g_arSelectableMsns[i]);
+}
+}
+return ""
+}
+function IsAlreadyDectMsn ( wert) {
+for ( var i=0;i<5;i++) {
+if ( jslGetValue( "uiPostDectMsn"+i) == wert) return true;
+}
+return false;
+}
+function IsConfiguredDectMsn ( wert) {
+for ( var i=0;i<5;i++) {
+if ( jslGetValue( "uiDeviceMsn"+i) == wert) {
+jslSetValue("uiDeviceMsn"+i, "");
+return true;
+}
+}
+return false;
+}
+function GetConfiguredDectMsn() {
+for ( var i=0;i<5;i++) {
+var wert = jslGetValue( "uiDeviceMsn"+i);
+if ( wert != "") {
+jslSetValue("uiDeviceMsn"+i, "");
+return wert;
+}
+}
+return "";
+}
+function MsnEntry ( nIdx, nId, valueNo, showNo, sNetType, bIsDectMsn) {
+this.idx = nIdx;
+this.id = nId;
+this.value = valueNo;
+this.no = showNo;
+this.netType = sNetType;
+this.dectMsn = bIsDectMsn;
+}
+function GetMsnArrayValue(arObject) {
+return arObject.value;
+}
+function GetMsnArrayNo(arObject) {
+return arObject.no;
+}
+function GetMsnArrayNetType(arObject) {
+return arObject.netType;
+}
+function GetMsnArrayIsDectMsn(arObject) {
+return arObject.dectMsn;
+}
+function DectEntry ( isChecked, valueNo, sNetType, isCheckBox) {
+this.value = valueNo;
+this.checked = isChecked;
+this.netType = sNetType;
+this.checkBox = isCheckBox;
+}
+function GetDectArrayValue(arObject) {
+return arObject.value;
+}
+function GetDectArrayNetType(arObject) {
+return arObject.netType;
+}
+function uiDoBack() {
+jslGoTo("fon_config", "fon_config_Dect_name");
+}
+function uiDoCancel() {
+if (!AskAssiCancel()) return;
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else if(FonAssiFromPageValue== "fonstartmenu"){
+jslGoTo("home", "fondevices");
+return;
+}else if(FonAssiFromPageValue== "fonerweitert"){
+jslGoTo("fon", "fondevices");
+return;
+}
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+</script>
--- fon_config/fon_config_Dect_3.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_3.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,25 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPostPots">
+<input type="hidden" name="telcfg:settings/MSN/NTDefault" value="<? query telcfg:settings/MSN/NTDefault ?>" id="uiPostNTDefault">
+<input type="hidden" name="dect:settings/MSN0/MSN" value="<? query dect:settings/MSN0/MSN ?>" id="uiPostDectMsn0" disabled>
+<input type="hidden" name="dect:settings/MSN1/MSN" value="<? query dect:settings/MSN1/MSN ?>" id="uiPostDectMsn1" disabled>
+<input type="hidden" name="dect:settings/MSN2/MSN" value="<? query dect:settings/MSN2/MSN ?>" id="uiPostDectMsn2" disabled>
+<input type="hidden" name="dect:settings/MSN3/MSN" value="<? query dect:settings/MSN3/MSN ?>" id="uiPostDectMsn3" disabled>
+<input type="hidden" name="dect:settings/MSN4/MSN" value="<? query dect:settings/MSN4/MSN ?>" id="uiPostDectMsn4" disabled>
+<? if eq '$var:usePSTN' 1 `
+<input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPostPots" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN0" value="<? query telcfg:settings/MSN/MSN0 ?>" id="uiPostMsn0" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN1" value="<? query telcfg:settings/MSN/MSN1 ?>" id="uiPostMsn1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN2" value="<? query telcfg:settings/MSN/MSN2 ?>" id="uiPostMsn2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN3" value="<? query telcfg:settings/MSN/MSN3 ?>" id="uiPostMsn3" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN4" value="<? query telcfg:settings/MSN/MSN4 ?>" id="uiPostMsn4" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN5" value="<? query telcfg:settings/MSN/MSN5 ?>" id="uiPostMsn5" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN6" value="<? query telcfg:settings/MSN/MSN6 ?>" id="uiPostMsn6" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN7" value="<? query telcfg:settings/MSN/MSN7 ?>" id="uiPostMsn7" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN8" value="<? query telcfg:settings/MSN/MSN8 ?>" id="uiPostMsn8" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN9" value="<? query telcfg:settings/MSN/MSN9 ?>" id="uiPostMsn9" disabled>
+` ?>
+<? multiquery sip:settings/sip/list(displayname,ID) `
+<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="uiPost$1" disabled>
+<input type="hidden" name="sip:settings/$1/ID" value="$3" id="ui$1ID" disabled>
+` ?>
--- fon_config/fon_config_Dect_3.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_3.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,41 @@
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:Txt1 ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb5"><? echo $var:Txt2 ?></p>
+<p class="mb5"><? echo $var:Txt3 ?></p>
+<p class="Left30 mt10 mb5"><b><? echo $var:Txt4 ?></b></p>
+<table id="tDectMsns" class="_xtborder">
+<tr><td class="c1" height="1px"></td><td class="c4"><table style="width: 300px"><tr><td height="1px"></td><td height="1px"></td></tr></table></td></tr>
+<? repeat [ 0 4 ] `
+<tr id="uiMsn$0Checked" style="display:none">
+<td class="c1"><span id="uiNameMsn$0Checked">&nbsp;</span></td>
+<td class="c4">
+<table style="width: 300px">
+<tr>
+<td class="c2"><input type="checkbox" name="BtnMsn$0Checked" id="uiView_CheckMsn$0" onclick="OnChangeCheckMsn($0)"></td>
+<td class="c3"><span id="uiNetworkMsn$0Checked">&nbsp;</span></td>
+</tr>
+</table>
+</td>
+</tr>
+` ?>
+</table>
+<p class="Left30 mt10 mb5"><b><? echo $var:Txt5 ?></b></p>
+<table id="tDectMsns" class="_xtborder">
+<tr><td class="c1" height="1px"></td><td height="1px"></td></tr>
+<? repeat [ 0 4 ] `
+<tr id="uiMsn$0Selection" style="display:none">
+<td class="c1"><span id="uiNameMsn$0Selection">&nbsp;</span></td>
+<td class="c4"><select size="1" id="uiView_Selection$0" class="Eingabefeld" style="width:200px" onchange="OnChangeSelection($0, value)"></select></td>
+</tr>
+` ?>
+</table>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoBack()" value="< Back" class="Pushbutton" id="uiBtnBack">
+<input type="button" onclick="uiDoOk()" value="OK >" class="Pushbuttonfett " id="uiBtnOK">&nbsp;&nbsp;
+<input type="button" onclick="uiDoCancel()" value="Cancel" class="Pushbutton" id="uiBtnCancel">
+</div></div></div></div></div></div>
+</div>
--- fon_config/fon_config_Dect_3.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_3.inc	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,20 @@
+<? include ../html/de/global.inc ?>
+<? setvariable var:Txt1 "Setup DECT devices for incomming calls " ?>
+<? setvariable var:Txt2 "Select a namber for this device." ?>
+<? setvariable var:Txt3 "You may setup new nuberes or select one from the tabel." ?>
+<? setvariable var:Txt4 "Table of allready configured devices" ?>
+<? setvariable var:Txt5 "Table of usabel Numberes" ?>
+<? setvariable var:Txt6 "fixed subscriberline" ?>
+<? setvariable var:Txt7 "Main number" ?>
+<? setvariable var:Txt8 "No call number set" ?>
+<? setvariable var:Txt9 'The selected number for outgoing calls sets up the default connection, used by DECT.' ?>
+<? setvariable var:Text4 'react on all incomming calls' ?>
+<? setvariable var:Text4b 'react only on the following numbers' ?>
+<? setvariable var:Text5 'Outgoiung calls' ?>
+<? setvariable var:Text6 'Incomming calls' ?>
+<? setvariable var:Text12 '<Number for outgoing calls>' ?>
+<? setvariable var:Text13 '(outgoing number)' ?>
+<? setvariable var:TextRufnrAnnehmen "react onlly on following numbers:" ?>
+<? setvariable var:TextAlleAnnehmen "react on all numbers" ?>
+<? setvariable var:TextInternet "Internet" ?>
+<? setvariable var:TextFestnetz "fixed subscriberline" ?>
--- fon_config/fon_config_Dect_3.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_3.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,255 @@
+<!-- ../fon_config/fon_config_Dect_3.js -->
+<? include ../html/de/fon_config/fon_config_Dect_3.inc ?>
+<style type="text/css">
+<!--
+.pCheck25 {text-indent: -25px; padding-left: 35px;}
+.pFett {font-weight: bold; margin-bottom: 10px;}
+#tDectMsns {margin-left: 40px; width: 400px; table-layout: fixed;}
+#tDectMsns td {padding: 1px 3px; overflow: hidden;}
+.c1 {text-align: left; width: 75px;}
+.c2 {text-align: left; width: 25px;}
+.c3 {text-align: left; width: 250px;}
+.c4 {text-align: left; width: 275px;}
+.Left30 {margin-left: 30px;}
+.ac {text-align: center;}
+.c5 {width: 30px; padding: 1px 5px;}
+.c6 {width: 60px; padding: 1px 5px;}
+.c7 {width: 60px; padding: 1px 5px;}
+.c8 {padding: 1px 0px;}
+.Left40 {margin-left: 30px;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/val.js ?>
+<? include ../html/de/js/jsl.js ?>
+var g_txt_Internet = "Internet";
+var g_txt_Festnetz = "Subscriberline";
+var g_txt_OutgoingingNo = "(number for outgoing calls)";
+var g_txt_ToMuchMsns = "Only 5 numbers can be setup for DECT devices. !\x0d\x0aThe maximum of 5 Numbers is reached!\x0d\x0a\x0d\x0aIf you want to setup an other Number you must first remove a device and set it up again.";
+var g_SelectMsnCount = 0;
+var g_arSelectableMsns = new Array();
+var g_arDectMsns = new Array();
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Txt1` ?>";
+var msnIndex = 0;
+<? multiquery sip:settings/sip/list(displayname,ID) `
+if (valIsZahlVorhanden("$2")) {
+g_arSelectableMsns[msnIndex] = new MsnEntry( msnIndex, "$0", "SIP$3", "$2", g_txt_Internet, IsAlreadyDectMsn( "$2"));
+msnIndex++;
+}
+` ?>
+<? if eq '$var:usePSTN' 1 `
+for (var i=0; i<10; i++) {
+if (jslGetValue("uiPostMsn"+i) != "") {
+g_arSelectableMsns[msnIndex] = new MsnEntry( msnIndex, i, jslGetValue("uiPostMsn"+i), jslGetValue("uiPostMsn"+i), g_txt_Festnetz, IsAlreadyDectMsn( jslGetValue("uiPostMsn"+i)));
+msnIndex++;
+}
+}
+if (jslGetValue("uiPostPots") != "") {
+g_arSelectableMsns[msnIndex] = new MsnEntry( msnIndex, i, jslGetValue("uiPostPots"), jslGetValue("uiPostPots"), g_txt_Festnetz, IsAlreadyDectMsn( jslGetValue("uiPostPots")));
+msnIndex++;
+}
+` ?>
+for ( var j=0; j<5; j++) {
+g_arDectMsns[j] = new DectEntry( false,jslGetValue( "uiPostDectMsn"+j),GetNetworkType(jslGetValue( "uiPostDectMsn"+j)),false);
+if ( jslGetValue( "uiPostDectMsn"+j) != "") {
+jslSetSpanText( "uiNameMsn"+j+"Checked", GetMsnName(j));
+jslSetSpanText( "uiNetworkMsn"+j+"Checked", GetNetworkType(jslGetValue( "uiPostDectMsn"+j))+ ": "+ jslGetValue( "uiPostDectMsn"+j));
+if ((jslGetValue("uiDeviceAllInCalls") != "" ) && ( IsConfiguredDectMsn(jslGetValue( "uiPostDectMsn"+j)) == true)) {
+jslSetChecked("uiView_CheckMsn"+j,true)
+g_arDectMsns[j].checked = true;
+}
+jslDisplay( "uiMsn"+j+"Checked", true);
+g_arDectMsns[j].checkBox = true;
+} else {
+jslSetSpanText( "uiNameMsn"+j+"Selection", GetMsnName(j));
+jslDisplay( "uiMsn"+j+"Selection", true);
+FillSelection("uiView_Selection"+j, "")
+g_arDectMsns[j].value = "Leer";
+}
+}
+if ( jslGetValue("uiDeviceAllInCalls") != "" ) {
+for ( var k=0;k<g_arDectMsns.length;k++) {
+if (g_arDectMsns[k].checkBox == false) {
+nValue = GetConfiguredDectMsn();
+if ( nValue != "") {
+OnChangeSelection( k,nValue);
+}
+}
+}
+}
+}
+function uiDoOk() {
+var strShowInCallNo = "";
+var saveMsnCount = 0;
+for (var i=0; i<g_arDectMsns.length; i++) {
+if ( g_arDectMsns[i].checkBox == true) {
+if (( g_arDectMsns[i].checked == true) && ( jslGetValue("uiDeviceOutgoingNo") != g_arDectMsns[i].value)) {
+jslSetValue( "uiDeviceMsn" + saveMsnCount, g_arDectMsns[i].value);
+strShowInCallNo += GetDectArrayValue(g_arDectMsns[i])+";"+GetDectArrayNetType(g_arDectMsns[i])+";";
+saveMsnCount +=1;
+}
+} else {
+if (jslGetValue( "uiView_Selection"+i) != "Leer"){
+jslSetValue( "uiDeviceMsn" + saveMsnCount, jslGetValue( "uiView_Selection"+i));
+strShowInCallNo += GetDisplayNumber(jslGetValue( "uiView_Selection"+i))+";"+GetNetworkType(jslGetValue( "uiView_Selection"+i))+";";
+saveMsnCount +=1;
+}
+}
+}
+jslSetValue( "uiDeviceAllInCalls", "0");
+jslSetValue( "uiShowCallInNo", strShowInCallNo);
+// jslSetValue( "uiDectDeviceCount", g_arDectMsns.length);
+jslGoTo("fon_config", "fon_config_End");
+}
+function OnChangeCheckMsn(nIdx) {
+g_arDectMsns[nIdx].checked = jslGetChecked("uiView_CheckMsn" +nIdx);
+}
+function OnChangeSelection(nId, nValue) {
+var oldValue = GetDectArrayValue(g_arDectMsns[nId]);
+var oldNo = GetDisplayNumber( oldValue);
+var oldNetType = GetNetworkType( oldValue);
+for ( var i=0;i<g_arDectMsns.length;i++) {
+if ((g_arDectMsns[i].checkBox == false) && ( i != nId)){
+if ( nValue == "Leer") {
+addOption("uiView_Selection"+i,oldValue,(oldNetType+": "+oldNo));
+} else {
+ReorganizeSelections( i, nValue, oldValue, (oldNetType+": "+oldNo));
+}
+}
+}
+g_arDectMsns[nId].value = nValue;
+for ( var j=0;j<g_arDectMsns.length;j++) {
+if (g_arDectMsns[j].checkBox == false) {
+jslSetSelection("uiView_Selection"+j,GetDectArrayValue(g_arDectMsns[j]))
+}
+}
+}
+function ReorganizeSelections (nIdx, newValue, oldValue, oldText) {
+var selObj = document.getElementById("uiView_Selection"+nIdx)
+for ( var j=0; j<selObj.length;j++) {
+if ( selObj.options[j].value == newValue) {
+if ( oldValue == "Leer") {
+selObj.options[j] = null;
+} else {
+selObj.options[j].value = oldValue;
+selObj.options[j].text = oldText;
+}
+break;
+}
+}
+}
+function GetMsnName(nIdx) {
+var strRetCode ="";
+switch (nIdx) {
+case 0 : strRetCode ="Msn A ";break;
+case 1 : strRetCode ="Msn B ";break;
+case 2 : strRetCode ="Msn C ";break;
+case 3 : strRetCode ="Msn D ";break;
+case 4 : strRetCode ="Msn E ";break;
+}
+return strRetCode;
+}
+function FillSelection(id, nr) {
+addOption(id, "Leer", "");
+for ( var i=0;i<g_arSelectableMsns.length;i++) {
+if (GetMsnArrayIsDectMsn(g_arSelectableMsns[i]) == false) {
+addOption( id, GetMsnArrayValue(g_arSelectableMsns[i]), (GetMsnArrayNetType(g_arSelectableMsns[i])+": "+GetMsnArrayNo(g_arSelectableMsns[i])));
+}
+}
+jslSetSelection(id, nr=="" ? "Leer":nr);
+}
+function addOption (id, val, text) {
+var element;
+element = document.getElementById(id);
+if (element == null) return;
+var eintrag = new Option(text, val, false, false);
+element.options[element.length]=eintrag;
+}
+function GetDisplayNumber( wert) {
+if ( wert == "Leer") return "";
+for ( var i=0;i<g_arSelectableMsns.length;i++) {
+if ( GetMsnArrayValue(g_arSelectableMsns[i]) == wert) {
+return GetMsnArrayNo(g_arSelectableMsns[i]);
+}
+}
+return ""
+}
+function GetNetworkType( wert) {
+if ( wert == "Leer") return "";
+for ( var i=0;i<g_arSelectableMsns.length;i++) {
+if ( GetMsnArrayValue(g_arSelectableMsns[i]) == wert) {
+return GetMsnArrayNetType(g_arSelectableMsns[i]);
+}
+}
+return ""
+}
+function IsAlreadyDectMsn ( wert) {
+for ( var i=0;i<5;i++) {
+if ( jslGetValue( "uiPostDectMsn"+i) == wert) return true;
+}
+return false;
+}
+function IsConfiguredDectMsn ( wert) {
+for ( var i=0;i<5;i++) {
+if ( jslGetValue( "uiDeviceMsn"+i) == wert) {
+jslSetValue("uiDeviceMsn"+i, "");
+return true;
+}
+}
+return false;
+}
+function GetConfiguredDectMsn() {
+for ( var i=0;i<5;i++) {
+var wert = jslGetValue( "uiDeviceMsn"+i);
+if ( wert != "") {
+jslSetValue("uiDeviceMsn"+i, "");
+return wert;
+}
+}
+return "";
+}
+function MsnEntry ( nIdx, nId, valueNo, showNo, sNetType, bIsDectMsn) {
+this.idx = nIdx;
+this.id = nId;
+this.value = valueNo;
+this.no = showNo;
+this.netType = sNetType;
+this.dectMsn = bIsDectMsn;
+}
+function GetMsnArrayValue(arObject) {
+return arObject.value;
+}
+function GetMsnArrayNo(arObject) {
+return arObject.no;
+}
+function GetMsnArrayNetType(arObject) {
+return arObject.netType;
+}
+function GetMsnArrayIsDectMsn(arObject) {
+return arObject.dectMsn;
+}
+function DectEntry ( isChecked, valueNo, sNetType, isCheckBox) {
+this.value = valueNo;
+this.checked = isChecked;
+this.netType = sNetType;
+this.checkBox = isCheckBox;
+}
+function GetDectArrayValue(arObject) {
+return arObject.value;
+}
+function GetDectArrayNetType(arObject) {
+return arObject.netType;
+}
+function uiDoBack() {
+jslGoTo("fon_config", "fon_config_2");
+}
+function uiDoCancel() {
+if (!AskAssiCancel()) return;
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+</script>
--- fon_config/fon_config_Dect_check.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_check.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,5 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<input type="hidden" name="telcfg:settings/DialPort" value="<? query telcfg:settings/DialPort ?>" id="uiPostDialPort" disabled>
+<input type="hidden" name="telcfg:command/Dial" value="" id="uiPostDial" disabled>
+<input type="hidden" name="telcfg:command/Hangup" value="" id="uiPostHangup" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port0/Fax" value="<? query telcfg:settings/MSN/Port0/Fax ?>" id="uiPostPort0Fax" disabled>
--- fon_config/fon_config_Dect_check.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_check.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,28 @@
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:Txt1 ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<? if eq $var:FonTestNo '2' `
+<p class="mb10"><? echo '$var:Txt2' ?><b><span id="uiViewFonMsn">&nbsp;</span></b><? echo '$var:Txt3' ?></p>
+<ol>
+<li><p><? echo '$var:Txt4' ?></p><p class="pLeft15"><font size="-1"><? echo '$var:Txt12' ?></font></p></li>
+<li><? echo '$var:Txt5' ?></li>
+<li><? echo '$var:Txt6' ?></li>
+</ol>
+` `
+<p class="mb10"><? echo '$var:Txt2' ?></p>
+<ol>
+<li><? echo '$var:Txt3' ?></li>
+<li><? echo '$var:Txt5' ?></li>
+<li><? echo '$var:Txt6' ?></li>
+<li><? echo '$var:Txt7' ?></li>
+</ol>
+` ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoBack()" value="Back" class="Pushbutton" style=" width: 170px;">&nbsp;
+<input type="button" onclick="uiDoOk()" value="OK" class="Pushbuttonfett" style=" width: 170px;">&nbsp;&nbsp;
+<input type="button" onclick="uiDoCancel()" value="Cancel" class="Pushbutton" id="uiCancelBtn" style="display: none;">
+</div></div></div></div></div></div>
+</div>
--- fon_config/fon_config_Dect_check.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_check.inc	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,25 @@
+<? include ../html/de/global.inc ?>
+<? if eq $var:FonTestNo '2' `
+<? setvariable var:Txt1 "Test MSN and ISDN-fon" ?>
+<? setvariable var:Txt2 "The ISDN-fon is with the number " ?>
+<? setvariable var:Txt3 " not reachabler. " ?>
+<? setvariable var:Txt4 "Check your MSN-settings in Your ISDN-fon." ?>
+<? setvariable var:Txt5 "Be sure that the ISDN-fon is connected to FON S0-connectiuon of the FRITZ!Box." ?>
+<? setvariable var:Txt6 "Check the wire to the fon." ?>
+<? setvariable var:Txt10 "< Back" ?>
+` `
+<? setvariable var:Txt1 "Test connection" ?>
+<? setvariable var:Txt2 "Do the following:" ?>
+<? setvariable var:Txt3 "Test the registation of the DECT device on your FRITZ!Box." ?>
+<? setvariable var:Txt4 " is connected to FRITZ!Box." ?>
+<? setvariable var:Txt5 "If the DECT device was registered to a other base station befor, switch of the other base station." ?>
+<? setvariable var:Txt6 "Repat the assitent setup." ?>
+<? setvariable var:Txt7 "Remove all entrys within the tabel and set up all devices again." ?>
+<? if eq $var:TechType 'ISDN' `
+<? setvariable var:Txt6 "Test all settings of the connected ISDN-fon and remove all MSNs." ?>
+<? setvariable var:Txt7 "If possibel check the fon devive on a different base station." ?>
+` ?>
+<? setvariable var:Txt10 "change to a diffent connection" ?>
+` ?>
+<? setvariable var:Txt11 "go to fon-test" ?>
+<? setvariable var:Txt12 'Mor information can be found within the documentation of the fon.' ?>
--- fon_config/fon_config_Dect_check.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_check.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,91 @@
+<!-- ../fon_config/fon_config_Dect_check.js -->
+<? include ../html/de/fon_config/fon_config_Dect_check.inc ?>
+<style type="text/css">
+<!--
+ol {
+list-style-type: decimal;
+margin: 0px 10px 0px 30px;
+padding: 0px;
+}
+ol li {padding-bottom: 10px;}
+.pLeft15 {margin-left: 15px;font-size: 10px;color: #0066CC}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Txt1` ?>";
+<? if eq $var:FonTestNo '2' `
+jslSetSpanText( "uiViewFonMsn", getOutGoingNo(false));
+` `
+var port = jslGetValue("uiDevicePort");
+if ( port >= 50 ) {
+jslSetSpanText( "uiViewFonPort", "FON S0");
+} else {
+jslSetSpanText( "uiViewFonPort", "FON "+ (parseInt(port)+1));
+}
+` ?>
+if ( jslGetValue( "uiErrTest") > 0)
+jslDisplay( "uiCancelBtn", true);
+jslSetValue( "uiErrTest", jslGetValue( "uiErrTest") + 1);
+}
+function uiDoBack() {
+if ( jslGetValue("uiFonTestNo") == "2") {
+jslSetValue( "uiFonTestNo", "");
+jslGoTo("fon_config", "fon_config_IsdnSwitch");
+} else {
+jslGoTo("fon_config", "fon_config_Dect_1");
+}
+}
+function uiDoOk() {
+<? if eq $var:TechType 'ISDN' `
+var port = parseInt(jslGetValue("uiDevicePort"));
+` `
+var port = parseInt(jslGetValue("uiDevicePort"))+1;
+` ?>
+if ( jslGetValue("uiFonTestNo") == "2") {
+jslSetValue("uiPostDial", "**5*"+getOutGoingNo(false)+"#");
+} else {
+jslSetValue("uiPostDial", "**"+ port);
+}
+if ((port == "50") && (jslGetValue( "uiPostPort0Fax") == "1")){
+jslSetValue("uiPostDialPort", "2");
+} else {
+jslSetValue("uiPostDialPort", port=="1" ? "2":"1");
+}
+jslEnable("uiPostDial");
+jslEnable("uiPostDialPort");
+jslFormSubmitEx( "fon_config", "fon_config_Dect_test");
+}
+function uiDoCancel() {
+if (!AskAssiCancel()) return;
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else if(FonAssiFromPageValue== "fonstartmenu"){
+jslGoTo("home", "fondevices");
+return;
+}else if(FonAssiFromPageValue== "fonerweitert"){
+jslGoTo("fon", "fondevices");
+return;
+}
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+function getOutGoingNo( setSpan) {
+var rc = jslGetValue( "uiShowCallInNo");
+var sepPos = rc.indexOf( ';');
+var rc = rc.substr(0,sepPos);
+if ( setSpan == true) {
+jslSetSpanText( "uiSpanShowOutgoingNo", rc);
+}
+return rc;
+}
+</script>
--- fon_config/fon_config_Dect_name.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_name.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,7 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<? repeat [ 0 5 ] `
+<input type="hidden" name="dect:settings/Handset$0/Subscribed" value="<? query dect:settings/Handset$0/Subscribed ?>" id="uiPostHandset$0Subscribe" disabled>
+` ?>
+<? repeat [ 0 5 ] `
+<input type="hidden" name="dect:settings/Handset$0/Name" value="<? query dect:settings/Handset$0/Name ?>" id="uiPostHandset$0Notation" disabled>
+` ?>
--- fon_config/fon_config_Dect_name.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_name.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,14 @@
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:TextHinweis ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10" ><? echo '$var:Txt7' ?></p>
+<p class="mt10 ml30"><? echo $var:TextName ?>&nbsp;<input type="text" value size="32" class="mt10 ml50" maxlength="30" class="Eingabefeld" id="uiViewNotation"></p>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoBack()" value="Back" class="Pushbutton" id="uiBtnBack">
+<input type="button" onclick="uiDoOk()" value="OK" class="Pushbuttonfett " id="uiBtnOK">&nbsp;&nbsp;
+<input type="button" onclick="uiDoCancel()" value="Cancel" class="Pushbutton" id="uiBtnCancel">
+</div></div></div></div></div></div>
+</div>
--- fon_config/fon_config_Dect_name.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_name.inc	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,3 @@
+<? include ../html/de/global.inc ?>
+<? setvariable var:TextHinweis "Enter name of DECT device" ?>
+<? setvariable var:TextName "Enter a name for the fon:" ?>
--- fon_config/fon_config_Dect_name.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_name.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,84 @@
+<!-- ../fon_config/fon_config_Dect_name.js -->
+<? include ../html/de/fon_config/fon_config_Dect_name.inc ?>
+<style type="text/css">
+<!--
+ol {
+list-style-type: decimal;
+margin: 0px 10px 0px 30px;
+padding: 0px;
+}
+.ml30 { margin-left: 30px; }
+.ml50 { margin-left: 50px; }
+.mt10 {margin-top: 10px;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/val.js ?>
+<? include ../html/de/js/jsl.js ?>
+var g_txtDect = "Schnurlostelefon (DECT) ";
+var g_curDectPort = (-1);
+var g_Name = "";
+var g_mldNoNotation = "Enter name of DECT device.";
+var g_mld_NoSpezialChar = "Enter a name for the fon. Dont use: `~!@#$^&*=+[]{}\|;:'\",<>/und?";
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Txt1` ?>";
+<? if eq $var:TechType 'DECT' `
+for ( var j = 0; j < 5; j++) {
+if (jslGetValue("uiPostHandset"+j+"Subscribe") == "0") {
+g_curDectPort = j;
+break;
+}
+}
+g_Name = g_txtDect + (g_curDectPort+1);
+` ?>
+jslSetValue( "uiViewNotation", jslGetValue( "uiDeviceNotation"));
+if (jslGetValue("uiViewNotation") == "")
+jslSetValue( "uiViewNotation", g_Name);
+}
+function uiDoBack() {
+jslGoTo("fon_config", "fon_config_Dect_1");
+}
+function uiDoOk() {
+Name=jslGetValue( "uiViewNotation");
+if (Name == "") { alert( g_mldNoNotation);return;}
+var pattern =/[\`\~\!@#$\^&\*=\+\[\]\{\}\\\|;:\'\",\<\>\?\/]/;
+if(Name.search(pattern)!=-1){ alert( g_mld_NoSpezialChar);return;}
+jslCopyValue( "uiDeviceNotation", "uiViewNotation");
+DeviceCounter=jslGetValue("uiDectID");
+jslCopyValue( "uiPostHandset"+DeviceCounter+"Notation", "uiDeviceNotation");
+jslEnable("uiPostHandset"+DeviceCounter+"Notation");
+jslSubmitFormEx("fon_config", "fon_config_End");
+}
+function uiDoCancel()
+{
+if (!AskAssiCancel()) return;
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else if(FonAssiFromPageValue== "fonstartmenu"){
+jslGoTo("home", "fondevices");
+return;
+}else if(FonAssiFromPageValue== "fonerweitert"){
+jslGoTo("fon", "fondevices");
+return;
+}
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+function GetFonControlUserEntry(FonControlUserId)
+{
+g_FonControlUserInfoListCnt = <? query telcfg:settings/Foncontrol/User/count ?>
+for ( var j=0; j<g_FonControlUserInfoListCnt; j++) {
+if(g_FonControlUserInfoList[j].nFonControlUserId==FonControlUserId)
+return g_FonControlUserInfoList[j];
+}
+return null;
+}
+</script>
--- fon_config/fon_config_Dect_register_1.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_1.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,2 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<input type="hidden" name="dect:command/StartSubscription" value="1" id="uiPostStartSubcription" disabled>
--- fon_config/fon_config_Dect_register_1.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_1.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,17 @@
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:Txt1 ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10"><? echo '$var:Txt2' ?></p>
+<ol>
+<li><p><? echo '$var:Txt3' ?> <br> <? echo '$var:Txt13' ?> <? echo '$var:Txt14' ?> <br><? echo '$var:Txt12' ?><p></li>
+<li><p><? echo '$var:Txt6' ?><br><? echo '$var:Txt7' ?></p></li>
+</ol>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoBack()" value="Back" class="Pushbutton" >&nbsp;
+<input type="button" onclick="uiDoOk()" value="OK" class="Pushbuttonfett" >&nbsp;&nbsp;
+<input type="button" onclick="uiDoCancel()" value="Cancel" class="Pushbutton" id="uiCancelBtn" >
+</div></div></div></div></div></div>
+</div>
--- fon_config/fon_config_Dect_register_1.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_1.inc	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,14 @@
+<? include ../html/de/global.inc ?>
+<? setvariable var:Txt1 "Register DECT device" ?>
+<? setvariable var:Txt2 "Do the following:" ?>
+<? setvariable var:Txt3 "Start the procidure for registering on the handheld device first." ?>
+<? setvariable var:Txt4 " Read Instruction about your hendheld device if needed. " ?>
+<? setvariable var:Txt5 "Start registarion procedure on your handheld device (DECT)." ?>
+<? setvariable var:Txt5a "(Enter System-PIN, Select base station or ID " ?>
+<? setvariable var:Txt6 'If DECT starts to register then click "connect".' ?>
+<? setvariable var:Txt7 'registration is noe mad automatically, no more actions ar needed.' ?>
+<? setvariable var:Txt10 "Back < "?>
+<? setvariable var:Txt11 "Connect >" ?>
+<? setvariable var:Txt12 'documnetation can be found with your DECT Device.' ?>
+<? setvariable var:Txt13 "You will be promted to enter the DECT ID and the System PIN, this is always 0000 " ?>
+<? setvariable var:Txt14 'What the exact staps are depends on the DECT device' ?>
--- fon_config/fon_config_Dect_register_1.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_1.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,57 @@
+<!-- ../fon_config/fon_config_Dect_register_1.js -->
+<? include ../html/de/fon_config/fon_config_Dect_register_1.inc ?>
+<style type="text/css">
+<!--
+ol {
+list-style-type: decimal;
+margin: 0px 10px 0px 30px;
+padding: 0px;
+}
+ol li {padding-bottom: 10px;}
+.pLeft15 {margin-left: 15px;color: #0066CC}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Txt1` ?>";
+}
+function uiDoBack() {
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else{
+jslGoTo("fon_config", "fon_config_Dect_1");
+}
+}
+function uiDoOk() {
+jslEnable( "uiPostStartSubcription");
+jslFormSubmitEx("fon_config", "fon_config_Dect_register_2");
+}
+function uiDoCancel() {
+if (!AskAssiCancel()) return;
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else if(FonAssiFromPageValue== "fonstartmenu"){
+jslGoTo("home", "fondevices");
+return;
+}else if(FonAssiFromPageValue== "fonerweitert"){
+jslGoTo("fon", "fondevices");
+return;
+}
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+</script>
--- fon_config/fon_config_Dect_register_2.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_2.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,9 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<input type="hidden" name="var:RegisterRepeat" value="<? echo $var:RegisterRepeat ?>" id="uiRegisterRepeat">
+<? multiquery telcfg:settings/Foncontrol/User/list(Id,Name,Type,Intern) `
+<input type="hidden" name="telcfg:settings/Foncontrol/$1/Name" value="$3" id="uiPostFoncontrol$0Name" disabled>
+<input type="hidden" name="telcfg:settings/Foncontrol/$1/Intern" value="$3" id="uiPostFoncontrol$0Intern">
+` ?>
+<input type="hidden" name="telcfg:settings/DialPort" value="<? query telcfg:settings/DialPort ?>" id="uiPostDialPort" disabled>
+<input type="hidden" name="telcfg:command/Dial" value="" id="uiPostDial" disabled>
+<input type="hidden" name="dect:command/StartSubscription" value="0" id="uiPostStartSubcription" disabled>
--- fon_config/fon_config_Dect_register_2.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_2.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,23 @@
+<? setvariable var:picture1 '../html/de/images/wait.gif' ?>
+<? setvariable var:picture1Text '$var:text21' ?>
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:Text1 ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="b10" id="uiShowStatus2"><span id="uiViewCheckStatus2"><? echo $var:Text2 ?></span></p>
+<div style="padding-top: 20px">
+<table id="tProgress" style="margin: auto">
+<tr id="uiShowStatus1" style="display: none"><td><span id="uiViewCheckStatus1"><? echo $var:Text21 ?></span></td></tr>
+<tr><td style="height: 10px; padding: 10px 0px"><img name="StatusPic" src="../html/de/images/wait.gif" style="width: 325px; height: 5px;" title=" "></td></tr>
+<!--tr id="uiShowStatus2" style="display: none"><td class="tProgress"><span id="uiViewCheckStatus2">&nbsp;</span></td></tr-->
+</table>
+</div>
+<? include ../html/de/home/error.html ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoBack()" value="Back" class="Pushbutton" id="uiBtnBack">
+<input type="button" id="AssiOKButtonId" onclick="uiDoOk()" value="OK" class="Pushbuttonfett " id="uiBtnOK" disabled>&nbsp;&nbsp;
+<input type="button" onclick="uiDoCancel()" value="Cancel" class="Pushbutton" id="uiBtnCancel">
+</div></div></div></div></div></div>
+</div>
--- fon_config/fon_config_Dect_register_2.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_2.inc	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,6 @@
+<? include ../html/de/global.inc ?>
+<? setvariable var:Text1 'DECT registarion is going on' ?>
+<? setvariable var:Text2 'DECT registarion is going on automaticaly, ..' ?>
+<? setvariable var:Text20 'Registartion of DECT was sucsessfull.' ?>
+<? setvariable var:Text21 'regisration of DECT is going on ...' ?>
+<? setvariable var:Text22 'Registartion of DECT was not sucsessfull.' ?>
--- fon_config/fon_config_Dect_register_2.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_register_2.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,97 @@
+<!-- ../first/fon_config_Dect_register_2.js -->
+<? include ../html/de/fon_config/fon_config_Dect_register_2.inc ?>
+<style type="text/css">
+<!--
+#tProgress td {vertical-align: middle; text-align: center;}
+#t1 {font-size: 12px;}
+#t1 td {padding: 2px 2px; vertical-align: top;}
+#t1 .c1 {width: 190px }
+#t1 .c2 {width: 298px }
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+var g_ToolTipText_Wait = "Wait, regisration of DECT is going on ...";
+//var g_ToolTipText_Success = "Registartion of DECT was sucsessfull.";
+var g_ToolTipText_Success = "Registartion of DECT was sucsessfull, push  \"Check\", to test the DECT device.";
+var g_ToolTipText_Failed = "Registartion of DECT was not sucsessfull. !";
+var g_PicturePath_Wait = "../html/de/images/wait.gif";
+var g_PicturePath_Success = "../html/de/images/finished-ok-green.gif";
+var g_PicturePath_Failed = "../html/de/images/finished-error.gif";
+var g_mld_RegisterFailed = "Registartion of DECT was not sucsessfull, the fault will be show at the DECT disply!";
+function uiDoChangeStateSuccess()
+{
+jslChangeImage( "StatusPic", g_PicturePath_Success, g_ToolTipText_Success);
+jslSetSpanText("uiViewCheckStatus2", g_ToolTipText_Success);
+jslEnable("AssiOKButtonId");
+}
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Text1` ?>";
+var nSubscribedDeviceCount = 0;
+<? multiquery dect:settings/Handset/list(Subscribed,Type) `
+if ( "$2" == "1") nSubscribedDeviceCount++;
+` ?>
+if ( nSubscribedDeviceCount >= (parseInt(jslGetValue( "uiDectDeviceCount"))+1)) {
+var nDectDeviceCount = parseInt(jslGetValue( "uiDectDeviceCount"));
+jslSetValue("uiDectID", nDectDeviceCount);
+jslSetValue("uiDectUserID", nSubscribedDeviceCount);
+jslSetValue("uiPostSubscriptionState","1");
+jslSetValue("uiPostDial", "**50");
+jslSetValue("uiPostDialPort", "50");
+jslEnable("uiPostDial");
+jslEnable("uiPostDialPort");
+window.setTimeout("uiDoChangeStateSuccess()",5000);
+//uiDoOk();
+} else if ( jslGetValue( "uiRegisterRepeat") == "7") {
+jslChangeImage( "StatusPic", g_PicturePath_Failed, g_ToolTipText_Failed);
+jslSetSpanText("uiViewCheckStatus2", g_mld_RegisterFailed);
+jslDisplay( "uiShowStatus2", true);
+} else {
+jslChangeImage( "StatusPic", g_PicturePath_Wait, g_ToolTipText_Wait);
+jslDisplay( "uiShowStatus1", true);
+window.setTimeout("uiDoRefresh()", 10000); // alle 10 sec.
+}
+}
+function uiDoCancel() {
+jslEnable( "uiPostStartSubcription");
+if (!AskAssiCancel()) return;
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else if(FonAssiFromPageValue== "fonstartmenu"){
+jslGoTo("home", "fondevices");
+return;
+}else if(FonAssiFromPageValue== "fonerweitert"){
+jslGoTo("fon", "fondevices");
+return;
+}
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+function uiDoBack() {
+jslGoTo("fon_config", "fon_config_Dect_register_1");
+}
+function uiDoOk() {
+var result=jslGetValue("uiPostSubscriptionState");
+if (result=="0")
+jslGoTo("fon_config", "fon_config_Dect_1");
+else
+jslSubmitFormEx("fon_config", "fon_config_Dect_test");
+}
+function uiDoRefresh() {
+if ( jslGetValue( "uiRegisterRepeat") == "") {
+jslSetValue( "uiRegisterRepeat", "1");
+} else {
+var nCount = parseInt(jslGetValue( "uiRegisterRepeat")) + 1;
+jslSetValue( "uiRegisterRepeat", nCount);
+}
+jslGoToEx("fon_config", "fon_config_Dect_register_2");
+}
+</script>
--- fon_config/fon_config_Dect_test.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_test.frm	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,2 @@
+<? include ../html/de/fon_config/fon_config.frm ?>
+<input type="hidden" name="telcfg:command/Hangup" value="" id="uiPostHangup" disabled>
--- fon_config/fon_config_Dect_test.html	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_test.html	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,19 @@
+<div id="content">
+<div class="backtitelkonfig"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+<? echo $var:Txt1 ?>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<div id="uiViewTestStarting" style="display: none">
+<p class="mb5"><? echo $var:Txt2 ?></p>
+</div>
+<div id="uiViewTestStarted" style="display: none">
+<p class="mb5"><? echo $var:Txt3 ?></p>
+</div>
+<p class="pCenterTxt" id="uiViewWait"><span id="uiViewSpanWait"><? echo $var:Txt10 ?></span></p>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoOk()" value="OK" class="Pushbuttonfett" id="uiOKBtn"style="display: none;">&nbsp;
+<input type="button" onclick="uiDoCheck()" value="Check" class="Pushbutton" id="uiBackBtn"style="display: none;">&nbsp;&nbsp;
+<input type="button" onclick="uiDoCancel()" value="Cancel" class="Pushbutton" id="uiCancelBtn" style="display: none;">
+</div></div></div></div></div></div>
+</div>
--- fon_config/fon_config_Dect_test.inc	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_test.inc	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,14 @@
+<? include ../html/de/global.inc ?>
+<? setvariable var:Txt1 "Test DECT connection" ?>
+<? setvariable var:Txt2 "The FRITZ!Box is testing, registered DECT devices." ?>
+<? setvariable var:Txt3 "If the devis ix ringig now, all is OK." ?>
+<? setvariable var:Txt4 'Klick on to' ?>
+<? setvariable var:Txt5 '"OK >"' ?>
+<? setvariable var:Txt6 '. ' ?>
+<? setvariable var:Txt7 "If the device is not ringing, then klick on" ?>
+<? setvariable var:Txt8 '"Informationen"' ?>
+<? setvariable var:Txt9 " " ?>
+<? setvariable var:Txt10 "Please be patient .." ?>
+<? setvariable var:Txt11 "< Back" ?>
+<? setvariable var:Txt12 "No" ?>
+<? setvariable var:Txt13 "Yes" ?>
--- fon_config/fon_config_Dect_test.js	2008-01-01 19:00:00.000000000 -0500
+++ fon_config/fon_config_Dect_test.js	2008-05-20 11:50:00.000000000 -0400
@@ -0,0 +1,57 @@
+<!-- ../fon_config/fc_fon_1.js -->
+<? include ../html/de/fon_config/fon_config_Dect_test.inc ?>
+<style type="text/css">
+<!--
+.pCenterTxt {text-align: center; padding: 10px 10px; color: #0066CC;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+var g_txtFonring = "Klingelt das Telefon?";
+function uiDoOnLoad() {
+document.title = "<? print `$var:BoxName` ?>" + " " + "<? print `$var:Txt1` ?>";
+jslDisplay( "uiViewTestStarting",true);
+window.setTimeout("uiDoRing()", 4000);
+}
+function uiDoBack() {
+jslEnable("uiPostHangup");
+jslFormSubmitEx( "fon_config", "fon_config_Dect_1");
+}
+function uiDoOk() {
+jslEnable("uiPostHangup");
+jslFormSubmitEx("fon_config", "fon_config_Dect_name");
+}
+function uiDoCheck() {
+jslEnable("uiPostHangup");
+jslFormSubmitEx("fon_config", "fon_config_Dect_check");
+}
+function uiDoRing() {
+jslDisplay( "uiViewTestStarting",false);
+jslSetSpanText( "uiViewSpanWait", g_txtFonring);
+jslDisplay( "uiViewTestStarted", true);
+jslDisplay( "uiBackBtn",true);
+jslDisplay( "uiOKBtn", true);
+}
+function uiDoCancel() {
+if (!AskAssiCancel()) return;
+var FonAssiFromPageValue=jslGetValue("uiFonAssiFromPage");
+if (FonAssiFromPageValue== "decthandset"){
+jslSubmitFormEx("dect", "handset","handset");
+return;
+}else if(FonAssiFromPageValue== "dectsettings"){
+jslSubmitFormEx("dect", "setting","setting");
+return;
+}else if(FonAssiFromPageValue== "fonstartmenu"){
+jslGoTo("home", "fondevices");
+return;
+}else if(FonAssiFromPageValue== "fonerweitert"){
+jslGoTo("fon", "fondevices");
+return;
+}
+if ( jslGetValue("uiPostPageMaster") == "home") {
+jslGoTo("konfig", jslGetValue("uiPostPageMaster"));
+} else {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+}
+</script>
