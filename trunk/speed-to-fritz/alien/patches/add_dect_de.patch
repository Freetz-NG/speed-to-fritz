--- fon/fonsetupdect.frm	1969-12-31 19:00:00.000000000 -0500
+++ fon/fonsetupdect.frm	2008-08-31 06:00:52.000000000 -0400
@@ -0,0 +1,9 @@
+<input type="hidden" name="var:MsnNr" value="<? echo $var:MsnNr ?>" id="uiPostMsnNr">
+<input type="hidden" name="dect:settings/RingOnAllMSNs" value="<? query dect:settings/RingOnAllMSNs ?>" id="uiPostRingOnAllMSNs" disabled>
+<? repeat [ 0 4 ] `
+<input type="hidden" name="dect:settings/MSN$0/MSN" value="<? query dect:settings/MSN$0/MSN ?>" id="uiPostMSN$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/CLIR" value="<? query dect:settings/MSN$0/CLIR ?>" id="uiPostCLIR$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/CallWaiting" value="<? query dect:settings/MSN$0/CallWaiting ?>" id="uiPostCallWaiting$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/BusyOnBusy" value="<? query dect:settings/MSN$0/BusyOnBusy ?>" id="uiPostBusyOnBusy$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/Handsets" value="<? query dect:settings/MSN$0/Handsets ?>" id="uiPostHandsets$0" disabled>
+` ?>
--- fon/dect0.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon/dect0.frm	2008-08-15 07:46:06.000000000 -0400
@@ -0,0 +1,32 @@
+<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
+<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
+<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
+<input type="hidden" name="var:ShowIsdnDefault" value="<? echo $var:ShowIsdnDefault ?>" id="uiShowIsdnDefault">
+<input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPostPots">
+<input type="hidden" name="telcfg:settings/MSN/NTDefault" value="<? query telcfg:settings/MSN/NTDefault ?>" id="uiPostNTDefault">
+<input type="hidden" name="telcfg:settings/MSN/MSN0" value="<? query telcfg:settings/MSN/MSN0 ?>" id="uiPostMsn0" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN1" value="<? query telcfg:settings/MSN/MSN1 ?>" id="uiPostMsn1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN2" value="<? query telcfg:settings/MSN/MSN2 ?>" id="uiPostMsn2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN3" value="<? query telcfg:settings/MSN/MSN3 ?>" id="uiPostMsn3" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN4" value="<? query telcfg:settings/MSN/MSN4 ?>" id="uiPostMsn4" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN5" value="<? query telcfg:settings/MSN/MSN5 ?>" id="uiPostMsn5" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN6" value="<? query telcfg:settings/MSN/MSN6 ?>" id="uiPostMsn6" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN7" value="<? query telcfg:settings/MSN/MSN7 ?>" id="uiPostMsn7" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN8" value="<? query telcfg:settings/MSN/MSN8 ?>" id="uiPostMsn8" disabled>
+<input type="hidden" name="telcfg:settings/MSN/MSN9" value="<? query telcfg:settings/MSN/MSN9 ?>" id="uiPostMsn9" disabled>
+<? multiquery sip:settings/sip/list(displayname) '
+<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="uiPost$1" disabled>
+' ?>
+<input type="hidden" name="telcfg:settings/MSN/Port3/BusyOnBusy" value="<? query telcfg:settings/MSN/Port3/BusyOnBusy ?>" id="uiPostBusy">
+<input type="hidden" name="telcfg:settings/MSN/Port3/CallWaitingProt" value="<? query telcfg:settings/MSN/Port3/CallWaitingProt ?>" id="uiPostWaiting">
+<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port3/NoRingWithNightSetting?>" id="uiPostNoRingNS">
+<input type="hidden" name="telcfg:settings/MSN/Port3/RingAllowed" value="<? query telcfg:settings/MSN/Port3/RingAllowed ?>" id="uiPostRingAllowed0">
+<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingTime" value="<? query telcfg:settings/MSN/Port3/NoRingTime?>" id="uiPostNoRingTime0">
+<input type="hidden" name="telcfg:settings/MSN/Port3/COLR" value="<? query telcfg:settings/MSN/Port3/COLR?>" id="uiPostColr">
+<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Voice" value="<? query telcfg:settings/MSN/Port3/MWI_Voice?>" id="uiPostMwiVoice">
+<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Fax" value="<? query telcfg:settings/MSN/Port3/MWI_Fax?>" id="uiPostMwiFax">
+<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Mail" value="<? query telcfg:settings/MSN/Port3/MWI_Mail?>" id="uiPostMwiMail">
+<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Once" value="<? query telcfg:settings/MSN/Port3/MWI_Once ?>" id="uiPostMwiOnce">
+
+<input type="hidden" name="dect:command/PageHandsets" id="uiPostPageHandsets" disabled>
+<input type="hidden" name="dect:command/DateTime" id="uiPostHandsetsTime" disabled>
--- fon/dect0.html	2008-01-01 19:00:00.000000000 -0500
+++ fon/dect0.html	2008-08-15 11:51:14.000000000 -0400
@@ -0,0 +1,47 @@
+<div id="content">
+<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+Schnurlostelefone (DECT)
+</div></div></div></div></div></div>
+<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
+<ul class="tabs">
+<li class="tabs_on"><div class="activtab">Übersicht</div></li>
+<li><a href="javascript:uiDoListDect()">Interne Nummern</a></li>
+<li><a href="javascript:uiDoSetupDect()">Zuordnung</a></li>
+<li><a href="javascript:uiDoEditDect()">Anmelden</a></li>
+</ul>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10">Schnurlostelefone (DECT) ohne eingestellte MSN führen ausgehende Anrufe über die Hauptrufnummer und reagieren auf alle einkommenden Anrufe.</p>
+<p class="ml25 mb5">Hauptrufnummer</p>
+<table id="t0" class="ml50 tborder" style="width: 300px">
+<td><select size="1" id="uiViewNr" class="Eingabefeld" style="width:300px"></select></td>
+</table>
+<p class="mb10">Auf Wunsch können Sie an Ihren Schnurlostelefonen (DECT) folgende MSN einstellen. Hinweise dazu entnehmen Sie den Unterlagen des Schnurlostelefones (DECT).</p>
+<p class="ml25 mb5">Vorhandene Rufnummern:</p>
+<p class="mb5">&nbsp;</p>
+<table id="t1" class="ml50 tborder" style="width: 300px">
+<? multiquery sip:settings/sip/list(displayname) `
+<tr id="uiSip$0" style="display:none"><td class="c1">Internet:</td><td class="c2">$2</td></tr>
+` ?>
+<? repeat [ 0 9 ] `
+<tr id="uiMsn$0" style="display:none"><td class="c1">Festnetz:</td><td class="c2"><? query telcfg:settings/MSN/MSN$0 ?></td></tr>
+` ?>
+<tr id="uiPots" style="display:none"><td class="c1">Festnetz:</td><td class="c2"><? query telcfg:settings/MSN/POTS ?></td></tr>
+<tr id="uiNichts" style="display:none"><td colspan=2 class="ac">Keine Rufnummern eingerichtet</td></tr>
+</table>
+</div></div></div></div></div></div>
+
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb5">Mit Hilfe der Paging-Funktion können Sie Schnurlostelefone (DECT) lokalisieren. Per Knopfdruck können auch Datum und Uhrzeit der Schnurlostelefone (DECT) gesetzt werden.</p>
+<div style="text-align: right;">
+<input type="button" value="Schnurlostelefone pagen" id="uiViewPage" onclick="uiDoPage()" class="Pushbutton" style="width:180px;">
+<input type="button" value="Datum und Uhrzeit setzen" id="uiViewDateTime" onclick="uiDoDateTime()" class="Pushbutton" style="width:180px;">
+<input type="button" value="Telefonbuch senden" id="uiSendBook" onclick="uiDoSendBook()" class="Pushbutton" style="width:180px;">
+</div>
+</div></div></div></div></div></div>
+<div class="backdialog" id="uiApplyCancelButtons"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoSave()" value="Übernehmen" class="Pushbutton" id="buttonSave">
+<input type="button" onclick="uiDoCancel()" value="Abbrechen" class="Pushbutton" id="buttonCancel">
+<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
+</div></div></div></div></div></div>
+</div></div></div></div></div></div></div>
+</div>
--- fon/dect0.js	2008-01-01 19:00:00.000000000 -0500
+++ fon/dect0.js	2008-08-15 07:46:06.000000000 -0400
@@ -0,0 +1,153 @@
+<!--		../fon/dect0.js		-->
+<style type="text/css">
+<!--
+#content {width: 580px; margin: auto;}
+.c1 {width: 150px; margin-left: 5px; padding: 2px 5px;}
+.c2 { margin-left: 5px; padding: 2px 0px;}
+.mt10 {margin-top: 10px;}
+.ml25 {margin-left: 25px;}
+.ml50 {margin-left: 50px;}
+.ar {text-align: right;}
+.ac {text-align: center;}
+
+
+
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/val.js ?>
+<? include ../html/de/js/jsl.js ?>
+var g_txtInternettyp	= "Internet: ";
+var g_txtFestnetztyp	= "Festnetz: ";
+var g_mldDigit			= "Eine Rufnummer darf nur aus Ziffern bestehen.";
+<? multiquery sip:settings/sip/list '
+var g_$1;
+' ?>
+<? if eq '$var:usePSTN' 1 `
+var g_msn0;
+var g_msn1;
+var g_msn2;
+var g_msn3;
+var g_msn4;
+var g_msn5;
+var g_msn6;
+var g_msn7;
+var g_msn8;
+var g_msn9;
+` ?>
+function uiDoOnLoad() {
+<? multiquery sip:settings/sip/list '
+g_$1 = jslGetValue("uiPost$1");
+' ?>
+g_msn0 = jslGetValue("uiPostMsn0");
+g_msn1 = jslGetValue("uiPostMsn1");
+g_msn2 = jslGetValue("uiPostMsn2");
+g_msn3 = jslGetValue("uiPostMsn3");
+g_msn4 = jslGetValue("uiPostMsn4");
+g_msn5 = jslGetValue("uiPostMsn5");
+g_msn6 = jslGetValue("uiPostMsn6");
+g_msn7 = jslGetValue("uiPostMsn7");
+g_msn8 = jslGetValue("uiPostMsn8");
+g_msn9 = jslGetValue("uiPostMsn9");
+fillId("uiViewNr", jslGetValue("uiPostNTDefault"));
+var bFound = false;
+<? multiquery sip:settings/sip/list(displayname) `
+if (valIsZahlVorhanden("$2")) {jslDisplay("uiSip$0", true); bFound = true;}
+` ?>
+<? if eq '$var:usePSTN' 1 `
+for (var i=0; i<10; i++) {
+if (jslGetValue("uiPostMsn"+i) != "") {jslDisplay("uiMsn"+i, true); bFound = true;}
+}
+if (jslGetValue("uiPostPots") != "") {jslDisplay("uiPots", true); bFound = true;}
+` ?>
+if (!bFound) jslDisplay("uiNichts", true);
+jslZebrastreifen("t1");
+<? setvariable var:handsetfound 0 ?>
+<? multiquery dect:settings/Handset/list(Subscribed,Type) `
+<? if eq $2 1 `
+<? if eq $3 1 `
+<? setvariable var:handsetfound 1 ?>
+` ?>
+` ?>
+` ?>
+}
+function uiDoSave() {
+var nr = jslGetValue("uiViewNr");
+jslSetValue("uiPostNTDefault", nr == "Leer" ? "":nr);
+jslFormSubmitEx("fon", "dect0");
+}
+var g_menu = "<? print $var:menu ?>";
+function uiDoHelp() {
+jslPopHelp("hilfe_fon_dect");
+}
+function uiDoCancel() {
+jslGoTo(g_menu, "");
+}
+function uiDoRefresh() {
+jslGoTo(g_menu, "dect0");
+}
+function uiDoEditDect() {
+jslGoTo(g_menu, "foneditdect");
+}
+function uiDoSetupDect() {
+jslGoTo(g_menu, "fonsetupdect");
+}
+function uiDoListDect() {
+jslGoTo(g_menu, "fonlistdect");
+}
+function fillId(id, nr) {
+<? multiquery sip:settings/sip/list(ID,displayname) '
+if (valIsZahlVorhanden("$3")) addOption(id, "SIP"+"$2", g_txtInternettyp+g_$1);
+' ?>
+addMsn(id, g_msn0);
+addMsn(id, g_msn1);
+addMsn(id, g_msn2);
+addMsn(id, g_msn3);
+addMsn(id, g_msn4);
+addMsn(id, g_msn5);
+addMsn(id, g_msn6);
+addMsn(id, g_msn7);
+addMsn(id, g_msn8);
+addMsn(id, g_msn9);
+addOption(id, "POTS", g_txtFestnetztyp+jslGetValue("uiPostPots"));
+addOption(id, "Leer", "");
+jslSetSelection(id, "Leer"); // Defaultwert
+jslSetSelection(id, nr=="" ? "Leer":nr);
+}
+function addMsn (id, msn) {
+if (msn != "") addOption(id, msn, g_txtFestnetztyp+msn);
+}
+function addOption (id, val, text) {
+var element;
+element = document.getElementById(id);
+if (element == null) return;
+var eintrag = new Option(text, val, false, false);
+element.options[element.length]=eintrag;
+}
+function SetChecked (postid, viewid) {
+jslSetChecked(viewid, jslGetValue(postid) != "0");
+}
+function GetChecked (postid, viewid) {
+jslSetValue(postid, jslGetChecked(viewid) ? "1":"0");
+}
+function OnOnce(n) {
+jslSetChecked("uiViewEinmal", n==0);
+jslSetChecked("uiViewImmer", n==1);
+}
+function uiDoSendBook() {
+jslSetValue("uiPostPageMaster", "dect0");
+jslGoTo("fon", "buchsend");
+}
+function uiDoPage () {
+jslSetValue("uiPostPageHandsets", "0");
+jslEnable("uiPostPageHandsets");
+jslSubmitFormEx("fon", "", "");
+alert("Alle angemeldeten Handteile sollten jetzt eine Minute lang klingeln!");
+}
+function uiDoDateTime () {
+jslSetValue("uiPostHandsetsTime", "0");
+jslEnable("uiPostHandsetsTime");
+jslSubmitFormEx("fon", "", "");
+alert("Uhrzeit wurde nur bei allen angemldeten Swiss-Voice comaptiblen Handteilen gesetzt!");
+}
+</script>
--- fon/fon1dect.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon/fon1dect.frm	2008-08-15 07:46:06.000000000 -0400
@@ -0,0 +1,23 @@
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/MSN" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/MSN ?>" id="uiPostThisMSN">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/CLIR" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/CLIR ?>" id="uiPostCLIR">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/CallWaiting" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/CallWaiting ?>" id="uiPostCallWaiting">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/BusyOnBusy" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/BusyOnBusy ?>" id="uiPostBusyOnBusy">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/Handsets" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/Handsets ?>" id="uiPostHandsets">
+<? repeat [ 1 8 ] `
+<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiInt$0" disabled>
+` ?>
+<? multiquery sip:settings/sip/list(displayname) '
+<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="ui$1" disabled>
+' ?>
+<? repeat [ 0 9 ] `
+<input type="hidden" name="telcfg:settings/MSN/MSN$0" value="<? query telcfg:settings/MSN/MSN$0 ?>" id="uiMsn$0" disabled>
+` ?>
+<input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPots" disabled>
+<? repeat [ 0 4 ] `
+<input type="hidden" name="dect:settings/MSN$0/MSN" value="<? query dect:settings/MSN$0/MSN ?>" id="uiPostMSN$0" disabled>
+` ?>
+<? repeat [ 0 5 ] `
+<input type="hidden" name="dect:settings/Handset$0/Subscribed" value="<? query dect:settings/Handset$0/Subscribed ?>" id="uiPostSubscribed$0" disabled>
+<input type="hidden" name="dect:settings/Handset$0/Type" value="<? query dect:settings/Handset$0/Type ?>" id="uiPostType$0" disabled>
+<input type="hidden" name="dect:settings/Handset$0/Name" value="<? query dect:settings/Handset$0/Name ?>" id="uiPostDectDeviceName$0" disabled>
+` ?>
--- fon/fon1dect.html	2008-01-01 19:00:00.000000000 -0500
+++ fon/fon1dect.html	2008-08-15 11:56:37.000000000 -0400
@@ -0,0 +1,43 @@
+
+<div id="content">
+<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+MSN zuordnen
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<!--	<p>MSN <script type="text/javascript">document.write(uiIndexMSN("<? echo $var:MsnNr ?>"));</script></p> -->	 
+
+<table>
+<tr>
+<td class="c1"><label for="uiViewMSN">MSN <script type="text/javascript">document.write(uiIndexMSN("<? echo $var:MsnNr ?>"));</script></label></td>
+<td><select size="1" id="uiViewMSN" class="Eingabefeld" style="width:200px"></select></td>
+</tr>
+</table>
+<p>Optionen</p>
+
+<table>
+<tr>
+<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewCLIR" id="uiViewCLIR0">&nbsp;<label for="uiViewCLIR">Anonym anrufen</label></td>
+<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewCallWaiting" id="uiViewCallWaiting">&nbsp;<label for="uiViewCallWaiting">Anklopfen</label></td>
+<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewBusyOnBusy" id="uiViewBusyOnBusy">&nbsp;<label for="uiViewBusyOnBusy">MSN besetzt</label></td>
+</tr>
+</table>
+
+<p>Zuordnung</p>
+<table id="tHandsets" class="tborder">
+<? repeat [ 0 5 ] '
+<tr id="uiViewSchnurlos$0" style="display:none">
+<td style="{text-align: left;"><input type="checkbox" name="uiViewHandset$0" id="uiViewHandset$0" disabled >&nbsp;
+<label for="uiViewHandset$0"><? query dect:settings/Handset$0/Name ?></label></td>
+</tr>
+' ?>
+</table>
+<table>
+<tr id="uiNichts" style="{text-align: center;"><td colspan=5 class="ac">Es sind keine Schnurlostelefone (DECT) angemeldet</td></tr>
+</table>
+</div></div></div></div></div></div>
+<div class="backdialog" id="uiApplyCancelButtons"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoSave()" value="Übernehmen" class="Pushbutton" id="buttonSave">
+<input type="button" onclick="uiDoCancel()" value="Abbrechen" class="Pushbutton" id="buttonCancel">
+<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
+</div></div></div></div></div></div>
+</div>
--- fon/fon1dect.js	2008-01-01 19:00:00.000000000 -0500
+++ fon/fon1dect.js	2008-08-15 11:49:30.000000000 -0400
@@ -0,0 +1,169 @@
+<!--		../fon/fon1dect.js		-->
+<style type="text/css">
+<!--
+#content {width: 540px; margin: auto;}
+td {padding: 5px 5px;}
+th {padding: 5px 5px;}
+.ac {text-align: center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/val.js ?>
+<? include ../html/de/js/jsl.js ?>
+var g_txt_Festnetz	= "Festnetz: ";
+var g_txt_Internet	= "Internet: ";
+var g_txt_Intern		= "Intern: ";
+<? multiquery sip:settings/sip/list '
+var g_$1;
+' ?>
+var g_msn0;
+var g_msn1;
+var g_msn2;
+var g_msn3;
+var g_msn4;
+var g_msn5;
+var g_msn6;
+var g_msn7;
+var g_msn8;
+var g_msn9;
+var g_pots;
+var g_int1;
+var g_int2;
+var g_int3;
+var g_int4;
+var g_int5;
+var g_int6;
+var g_int7;
+var g_int8;
+var g_MsnGesperrt = new Array(0, 0, 0, 0, 0);
+var g_Index = new Array("A", "B", "C", "D", "E");
+var g_Handsets;
+var g_MsnNr;
+var g_OptsCount = 0;
+var g_mldNoNummer = "Geben Sie bitte eine Rufnummer an.";
+var g_mldNoHandset = "Wählen Sie bitte mind. ein Mobilteil aus.";
+var g_mldNoOpts = "Es sind bereits alle verfügbaren Rufnummern zugeordnet.";
+function uiDoOnLoad() {
+g_Handsets = 0;
+<? multiquery dect:settings/Handset/list(Subscribed) `
+<? if eq $2 1 `
+g_Handsets |= (1<<$0);
+` ?>
+` ?>
+<? multiquery sip:settings/sip/list '
+g_$1 = jslGetValue("ui$1");
+' ?>
+g_msn0 = jslGetValue("uiMsn0");
+g_msn1 = jslGetValue("uiMsn1");
+g_msn2 = jslGetValue("uiMsn2");
+g_msn3 = jslGetValue("uiMsn3");
+g_msn4 = jslGetValue("uiMsn4");
+g_msn5 = jslGetValue("uiMsn5");
+g_msn6 = jslGetValue("uiMsn6");
+g_msn7 = jslGetValue("uiMsn7");
+g_msn8 = jslGetValue("uiMsn8");
+g_msn9 = jslGetValue("uiMsn9");
+g_pots = jslGetValue("uiPots");
+g_int1 = jslGetValue("uiInt1");
+g_int2 = jslGetValue("uiInt2");
+g_int3 = jslGetValue("uiInt3");
+g_int4 = jslGetValue("uiInt4");
+g_int5 = jslGetValue("uiInt5");
+g_int6 = jslGetValue("uiInt6");
+g_int7 = jslGetValue("uiInt7");
+g_int8 = jslGetValue("uiInt8");
+fillId("uiViewMSN", jslGetValue("uiPostThisMSN"));
+if (g_OptsCount == 1) {alert(g_mldNoOpts); return;}
+jslSetChecked("uiViewCLIR", jslGetValue("uiPostCLIR") == "1");
+jslSetChecked("uiViewCallWaiting", jslGetValue("uiPostCallWaiting") == "1");
+jslSetChecked("uiViewBusyOnBusy", jslGetValue("uiPostBusyOnBusy") == "1");
+bFound=false;
+for (var i=0; i<=6; i++) {
+if (jslGetValue("uiPostSubscribed"+i) == "1") {
+jslDisplay("uiViewSchnurlos"+i, true); bFound=true;
+}
+jslDisplay("uiNichts", !bFound);
+}
+var bits = jslGetValue("uiPostHandsets");
+var bits = (bits.charCodeAt(0) - 48);
+for (var j=0; j<6; j++) {
+if ((g_Handsets & (1<<j)) != 0)	{
+jslEnable("uiViewHandset"+j);
+} 
+jslSetChecked("uiViewHandset"+j, (bits & g_Handsets & (1<<j)) != 0);
+}
+}
+function uiDoSave() {
+var bits=0
+for (var j=0; j<6; j++) {
+if (jslGetChecked("uiViewHandset"+j)) bits |= 1<<j;
+}
+if (bits == 0) {alert(g_mldNoHandset); return;}
+var bits = (String.fromCharCode(bits + 48));
+jslSetValue("uiPostHandsets", bits);
+if (jslGetValue("uiViewMSN") == "Leer") {alert(g_mldNoNummer); return;}
+jslCopyValue("uiPostThisMSN", "uiViewMSN");
+jslSetValue("uiPostCLIR", jslGetChecked("uiViewCLIR") ? "1":"0");
+jslSetValue("uiPostCallWaiting", jslGetChecked("uiViewCallWaiting") ? "1":"0");
+jslSetValue("uiPostBusyOnBusy", jslGetChecked("uiViewBusyOnBusy") ? "1":"0");
+jslSubmitFormEx("fon", jslGetValue("uiPostPageMaster"));
+}
+function uiDoCancel() {
+jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+function uiDoHelp() {
+jslPopHelp("hilfe_fon_fon1dect");
+}
+function isFrei(msn) {
+for (var i=0; i<5; i++) {
+if (i != g_MsnNr && msn == jslGetValue("uiPostMSN"+i)) return false;
+}
+return true;
+} 
+function fillId(id, nr) {
+<? if eq '$var:usePSTN' 1 `
+// Auswahl mit den vorgegebenen MSN füllen und Eintrag msn selektieren
+addMsn(id, g_msn0, g_txt_Festnetz);
+addMsn(id, g_msn1, g_txt_Festnetz);
+addMsn(id, g_msn2, g_txt_Festnetz);
+addMsn(id, g_msn3, g_txt_Festnetz);
+addMsn(id, g_msn4, g_txt_Festnetz);
+addMsn(id, g_msn5, g_txt_Festnetz);
+addMsn(id, g_msn6, g_txt_Festnetz);
+addMsn(id, g_msn7, g_txt_Festnetz);
+addMsn(id, g_msn8, g_txt_Festnetz);
+addMsn(id, g_msn9, g_txt_Festnetz);
+addMsn(id, g_pots, g_txt_Festnetz);
+` ?> 
+// Sip Zugänge anfügen
+<? multiquery sip:settings/sip/list(ID,displayname) '
+if ("$3" != "" && isFrei("$3")) addOption(id, "$3", g_txt_Internet+g_$1);
+' ?>
+// Interne Nummern anfügen
+addMsn(id, g_int1, g_txt_Intern);
+addMsn(id, g_int2, g_txt_Intern);
+addMsn(id, g_int3, g_txt_Intern);
+addMsn(id, g_int4, g_txt_Intern);
+addMsn(id, g_int5, g_txt_Intern);
+addMsn(id, g_int6, g_txt_Intern);
+addMsn(id, g_int7, g_txt_Intern);
+addMsn(id, g_int8, g_txt_Intern);
+addOption(id, "Leer", "");
+jslSetSelection(id, nr=="" ? "Leer":nr);
+}
+function addMsn (id, msn, prefix) {
+if (msn != "" && isFrei(msn)) addOption(id, msn, prefix+msn);
+}
+function addOption (id, val, text) {
+var element;
+element = document.getElementById(id);
+if (element == null) return;
+g_OptsCount++;
+var eintrag = new Option(text, val, false, false);
+element.options[element.length]=eintrag;
+}
+function uiIndexMSN(nr) {
+g_MsnNr = nr;
+return g_Index[Number(nr)];
+}
+</script>
--- fon/foneditdect.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon/foneditdect.frm	2008-08-15 07:46:06.000000000 -0400
@@ -0,0 +1,9 @@
+<input type="hidden" name="dect:command/StartSubscription" id="uiPostStartSubscription" disabled>
+<input type="hidden" name="dect:command/Unsubscribe" id="uiPostUnsubscribe" disabled>
+<input type="hidden" name="dect:command/PageHandsets" id="uiPostPageHandsets" disabled>
+<input type="hidden" name="dect:command/DateTime" id="uiPostHandsetsTime" disabled>
+<? repeat [ 0 5 ] `
+<input type="hidden" name="dect:settings/Handset$0/Subscribed" value="<? query dect:settings/Handset$0/Subscribed ?>" id="uiPostSubscribed$0" disabled>
+<input type="hidden" name="dect:settings/Handset$0/Type" value="<? query dect:settings/Handset$0/Type ?>" id="uiPostType$0" disabled>
+<input type="hidden" name="dect:settings/Handset$0/Name" value="<? query dect:settings/Handset$0/Name ?>" id="uiPostDectDeviceName$0" disabled>
+` ?>
--- fon/foneditdect.html	2008-01-01 19:00:00.000000000 -0500
+++ fon/foneditdect.html	2008-08-15 11:56:17.000000000 -0400
@@ -0,0 +1,58 @@
+<div id="content">
+<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+Schnurlostelefone (DECT)
+</div></div></div></div></div></div>
+<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
+<ul class="tabs">
+<li><a href="javascript:uiDoDect()">Übersicht</a></li>
+<li><a href="javascript:uiDoListDect()">Interne Nummern</a></li>
+<li><a href="javascript:uiDoSetupDect()">Zuordnung</a></li>
+<li class="tabs_on"><div class="activtab">Anmelden</div></li>
+</ul>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10">Sie können DECT-Telefone an der FRITZ!Box an- und abmelden. Zum Anmelden eines DECT-Telefons müssen Sie die System-PIN (im Lieferzustand: 0000) am Mobilteil eingeben. Weiterhin können Sie die Bezeichnung der Schnurlostelefone (DECT) in der FRITZ!Box ändern.</p>
+<table id="tHandsets" class="tborder">
+<tr>
+<th class="c1">Nummer</th>
+<th class="c2">Name des DECT-Schnurlostelefon</th>
+<th class="c1">Angemeldet</th>
+<th class="c3">Swissvoice/GAP</th>
+<th class="c4"></th>
+<th class="c5"></th>
+</tr>	
+<? repeat [ 0 5 ] '
+<tr id="uiViewHandset$0" style="display:none">
+ <td class="c1"><option value="$0"><script type="text/javascript">document.write($0+1);</script></option></td>
+ <td class="c2"><input type=="text" id="uiViewName$0" size="32" maxlength="30" class="Eingabefeld"></td>
+ <td class="c1"><input type="checkbox" id="uiViewSubscribed$0" disabled></td>
+ <td class="c3"><input type="checkbox" id="uiViewType$0" disabled></td>
+ <td class="c4"></td>
+
+ <td class="c5">
+  <button type="button" id="uiViewDelete$0" onclick="uiDoDelete($0)" title="Abmelden" style="width: 30px">
+  <img src="../html/de/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
+  </button>
+ </td>
+</tr>
+' ?>
+<tr id="uiNichts" style="display:none"><td colspan=5 class="ac">Es sind keine Schnurlostelefone (DECT) angemeldet</td></tr>
+</table>
+
+<p class="mt10 ar"><input type="button" value="Schnurlostelefone anmelden" id="uiViewNew" onclick="uiDoNew()" class="Pushbutton" style="width:180px;"></p>		
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+
+<p class="mb5">Mit Hilfe der Paging-Funktion können Sie Schnurlostelefone (DECT) lokalisieren. Per Knopfdruck können auch Datum und Uhrzeit der DECT-Telefone gesetzt werden.</p>
+<div style="text-align: right;">
+<input type="button" value="Schnurlostelefone pagen" id="uiViewPage" onclick="uiDoPage()" class="Pushbutton" style="width:180px;">
+<input type="button" value="Datum und Uhrzeit setzen" id="uiViewDateTime" onclick="uiDoDateTime()" class="Pushbutton" style="width:180px;">
+<input type="button" value="Telefonbuch senden" id="uiSendBook" onclick="uiDoSendBook()" class="Pushbutton" style="width:180px;">
+</div>
+</div></div></div></div></div></div>
+
+<div class="backdialog" id="uiApplyCancelButtons"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoSave()" value="Übernehmen" class="Pushbutton" id="buttonSave">
+<input type="button" onclick="uiDoCancel()" value="Abbrechen" class="Pushbutton" id="buttonCancel">
+<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
+</div></div></div></div></div></div>
+</div></div></div></div></div></div></div>
+</div>
--- fon/foneditdect.js	2008-01-01 19:00:00.000000000 -0500
+++ fon/foneditdect.js	2008-08-15 11:44:42.000000000 -0400
@@ -0,0 +1,99 @@
+<!--		../fon/foneditdect.js		-->
+<style type="text/css">
+<!--
+#content {width: 560px; margin: auto;}
+#tHandsets {width: 100%;}
+#tHandsets td {padding: 2px 3px;}
+#tHandsets th {padding: 2px 3px;}
+#tHandsets .c1 {text-align: center}
+#tHandsets .c2 {text-align: left}
+#tHandsets .c3 {text-align: center}
+#tHandsets .c4 {width: 0px;}
+#tHandsets .c5 {width: 30px;}
+.mt10 {margin-top: 10px;}
+.ar {text-align: right;}
+.ac {text-align: center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+var g_New = -1;
+function uiDoOnLoad() {
+var bFound = false;
+for (var i=0; i<=8; i++) {
+if (jslGetValue("uiPostSubscribed"+i) == "1") {
+jslCopyValue("uiViewName"+i, "uiPostDectDeviceName"+i );
+jslSetChecked("uiViewSubscribed"+i, jslGetValue("uiPostSubscribed"+i) == "1");
+jslSetChecked("uiViewType"+i, jslGetValue("uiPostType"+i) == "1");
+jslDisplay("uiViewHandset"+i, true); bFound=true;
+} else {
+jslDisable("uiViewDelete"+i)
+if (g_New == -1) g_New = i;
+}
+}
+jslDisplay("uiNichts", !bFound);
+jslSetEnabled("uiViewPage", bFound);
+if (g_New == -1) jslDisable("uiViewNew");
+jslZebrastreifen("tHandsets");
+}
+function uiDoHelp() {
+jslPopHelp("hilfe_fon_editdect");
+}
+function uiDoCancel() {
+jslGoTo("", "");
+}
+function uiDoRefresh() {
+jslGoTo("fon", "foneditdect");
+}
+function uiDoDect() {
+jslGoTo("fon", "dect0");
+}
+function uiDoListDect() {
+jslGoTo("fon", "fonlistdect");
+}
+function uiDoSetupDect() {
+jslGoTo("fon", "fonsetupdect");
+}
+function uiDoDelete(nr) {
+if (!confirm("Wollen Sie das Mobilteil abmelden?")) return;
+jslSetValue("uiPostUnsubscribe", nr);
+jslEnable("uiPostUnsubscribe");
+jslSubmitFormEx("fon", "", "");
+}
+function uiDoNew() {
+alert("Schurlostelefon (DECT) jetzt anmelden, und anschließend dieses Fenster schließen.");
+jslSetValue("uiPostStartSubscription", "0");
+jslEnable("uiPostStartSubscription");
+jslSubmitFormEx("fon", "", "");
+}
+function uiDoSendBook() {
+jslSetValue("uiPostPageMaster", "dect0");
+jslGoTo("fon", "buchsend");
+}
+function uiDoPage () {
+jslSetValue("uiPostPageHandsets", "0");
+jslEnable("uiPostPageHandsets");
+jslSubmitFormEx("fon", "", "");
+alert("Alle angemeldeten Handteile sollten jetzt eine Minute lang klingeln!");
+}
+function uiDoDateTime () {
+jslSetValue("uiPostHandsetsTime", "0");
+jslEnable("uiPostHandsetsTime");
+jslSubmitFormEx("fon", "", "");
+alert("Uhrzeit wurde nur bei allen angemldeten Swiss-Voice comaptiblen Handteilen gesetzt!");
+}
+var g_mldNoName = "Geben Sie bitte eine Bezeichnung an.";
+var g_txt_TkAnlage = "ISDN-Telefonanlage";
+var g_mld_TkAnlageforbidden = "ACHTUNG! ISDN-Telefonanlage ist als Bezeichnug intern in verwendung!";
+function uiDoSave() {
+for (var i=0; i<=8; i++) {
+if (jslGetValue("uiPostSubscribed"+i) == "1") {
+if (jslGetValue("uiViewName"+i) == "") {alert(g_mldNoName); return;}
+if (jslGetValue("uiViewName"+i) == g_txt_TkAnlage) {alert(g_mld_TkAnlageforbidden); return;}
+jslEnable("uiPostDectDeviceName"+i);
+jslCopyValue("uiPostDectDeviceName"+i, "uiViewName"+i);
+}
+}
+jslSubmitFormEx("fon", "", "");
+}
+</script>
--- fon/fonlist.html	2008-01-01 19:00:00.000000000 -0500
+++ fon/fonlist.html	2008-05-21 09:52:59.000000000 -0400
@@ -0,0 +1,46 @@
+
+<div id="content">
+<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+Schnurlostelefone (DECT)
+</div></div></div></div></div></div>
+<? if eq '$var:usePSTN' 1 `
+<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
+<ul class="tabs">
+<li class="tabs_on"><div class="activtab">Übersicht</div></li>
+<li><a href="javascript:uiDoMsn()">Festnetzrufnummern</a></li>
+</ul>
+` ?>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10">Hier können Sie einstellen, auf welche Rufnummern die angeschlossenen analogen Telefone reagieren sollen.</p>
+<table id="tFon" class="tborder">
+<tr>
+<th class="c1">Nummer</th>
+<th class="c2">Bezeichnung</th>
+<th class="c3">Rufnummer</th>
+<th class="c4"></th>
+</tr>
+<tr>
+<td class="c1">1</td>
+<td class="c2"><? query telcfg:settings/MSN/Port0/Name ?></td>
+<td class="c3"><script type="text/javascript">document.write(uiNummerDisplay("<? query telcfg:settings/MSN/Port0/MSN0 ?>"));</script></td>
+<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit0" onclick="uiEditFon(0)" title="Bearbeiten" style="width: 30px">
+<img src="../html/de/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
+</button></td>
+</tr>
+<tr>
+<td class="c1">2</td>
+<td class="c2"><? query telcfg:settings/MSN/Port1/Name ?></td>
+<td class="c3"><script type="text/javascript">document.write(uiNummerDisplay("<? query telcfg:settings/MSN/Port1/MSN0 ?>"));</script></td>
+<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit1" onclick="uiEditFon(1)" title="Bearbeiten" style="width: 30px">
+<img src="../html/de/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
+</button></td>
+</tr>
+</table>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
+</div></div></div></div></div></div>
+<? if eq '$var:usePSTN' 1 `
+</div></div></div></div></div></div></div>
+` ?>
+</div>
--- fon/fonlistdect.frm	2008-01-01 19:00:00.000000000 -0500
+++ fon/fonlistdect.frm	2008-05-20 17:10:00.000000000 -0400
@@ -0,0 +1,6 @@
+<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
+<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
+<? repeat [ 1 8 ] `
+<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostName$0" disabled>
+<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostNummer$0" disabled>
+` ?>
--- fon/fonlistdect.html	2008-01-01 19:00:00.000000000 -0500
+++ fon/fonlistdect.html	2008-05-21 09:58:07.000000000 -0400
@@ -0,0 +1,44 @@
+<? include ../html/de/fon/fonlistdect.inc ?>
+<div id="content">
+<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+Schnurlostelefone (DECT)
+</div></div></div></div></div></div>
+<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
+<ul class="tabs">
+<li><a href="javascript:uiDoDect()">Übersicht</a></li>
+<li class="tabs_on"><div class="activtab">Interne Nummer</div></li>
+<li><a href="javascript:uiDoSetupDect()">Zuordnung</a></li>
+<li><a href="javascript:uiDoEditDect()">Anmelden</a></li>
+</ul>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10">Für die DECT-Telefone der FRITZ!Box können interne Nummern eingerichtet werden. Die Telefone können so über die Anwahl **<Nummer> von anderen Telefonen an der FRITZ!Box erreicht werden.</p>
+<table id="tDECT" class="tborder">
+<tr>
+<th class="c1">Nummer</th>
+<th class="c2">Bezeichnung</th>
+<th class="c3">Rufnummer des Telefons</th>
+<th class="c4"></th>
+<th class="c5"></th>
+</tr>	
+<? repeat [ 1 8 ] '
+<tr id="uiViewDECT$0" style="display:none">
+<td class="c1">5$0</td>
+<td class="c2"><? query telcfg:settings/NTHotDialList/Name$0 ?></td>
+<td class="c3"><? query telcfg:settings/NTHotDialList/Number$0 ?></td>
+<td class="c4"><button type="button" id="uiViewEdit0" onclick="uiEditDECT($0)" title="Editieren" style="width: 30px">
+<img src="../html/de/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
+</button></td>
+<td class="c5"><button type="button" id="uiViewDelete0" onclick="uiDeleteDECT($0)" title="Löschen" style="width: 30px">
+<img src="../html/de/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
+</button></td>
+</tr>
+' ?>
+<tr id="uiNichts" style="display:none"><td colspan=5 class="ac">Es sind keine internen Nummern eingerichtet</td></tr>
+</table>
+<p class="mt10 ar"><input type="button" value="Neue Nummer" id="uiViewNew" onclick="uiNewDECT()" class="Pushbutton" style="width:180px;"></p>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
+</div></div></div></div></div></div>
+</div></div></div></div></div></div></div>
+</div>
--- fon/fonlistdect.js	2008-01-01 19:00:00.000000000 -0500
+++ fon/fonlistdect.js	2008-03-04 00:39:49.000000000 -0500
@@ -0,0 +1,70 @@
+<!--		../fon/fonlistdect.js		-->
+<style type="text/css">
+<!--
+#content {width: 560px; margin: auto;}
+#tDECT {width: 100%;}
+#tDECT td {padding: 2px 3px;}
+#tDECT th {padding: 2px 3px;}
+#tDECT .c1 {text-align: center}
+#tDECT .c4, #tDECT .c5 {width: 30px;}
+.mt10 {margin-top: 10px;}
+.ar {text-align: right;}
+.ac {text-align: center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+var g_mldDelete	= "Wollen Sie diese Nummer löschen ?";
+var g_New = 0;
+function uiDoOnLoad() {
+var bFound = false;
+for (var i=1; i<=8; i++) {
+if (jslGetValue("uiPostNummer"+i) != "") {
+jslDisplay("uiViewDECT"+i, true); bFound=true;
+} else {
+if (g_New == 0) g_New = i;
+}
+}
+jslDisplay("uiNichts", !bFound);
+if (g_New == 0) jslDisable("uiViewNew");
+jslZebrastreifen("tDECT");
+
+}
+function uiDoHelp() {
+jslPopHelp("hilfe_fon_listdect");
+}
+function uiDoCancel() {
+jslGoTo("", "");
+}
+function uiDoRefresh() {
+jslGoTo("fon", "fonelistdect");
+}
+function uiDoDect() {
+jslGoTo("fon", "dect0");
+}
+function uiDoEditDect() {
+jslGoTo("fon", "foneditdect");
+}
+function uiDoSetupDect() {
+jslGoTo("fon", "fonsetupdect");
+}
+
+function uiEditDECT(nr) {
+jslCopyValue("uiPostParent", "uiPostPageName");
+jslSetValue("uiPostIsdnNr", nr);
+jslSubmitFormEx("fon", "fon1isdn", jslGetValue("uiPostPageName"));
+}
+function uiDeleteDECT(nr) {
+if (!confirm(g_mldDelete)) return;
+jslSetValue("uiPostName"+nr, "");
+jslSetValue("uiPostNummer"+nr, "");
+jslEnable("uiPostName"+nr);
+jslEnable("uiPostNummer"+nr);
+jslSubmitFormEx("fon", "", "");
+}
+function uiNewDECT() {
+jslCopyValue("uiPostParent", "uiPostPageName");
+jslSetValue("uiPostIsdnNr", g_New);
+jslSubmitFormEx("fon", "fon1isdn", jslGetValue("uiPostPageName"));
+}
+</script>
--- fon/fonsetupdect.html	2008-01-01 19:00:00.000000000 -0500
+++ fon/fonsetupdect.html	2008-08-15 11:55:48.000000000 -0400
@@ -0,0 +1,54 @@
+
+<div id="content">
+<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+Schnurlostelefone (DECT)
+</div></div></div></div></div></div>
+<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
+<ul class="tabs">
+<li><a href="javascript:uiDoDect()">Übersicht</a></li>
+<li><a href="javascript:uiDoListDect()">Interne Nummern</a></li>
+<li class="tabs_on"><div class="activtab">Zuordnung</div></li>
+<li><a href="javascript:uiDoEditDect()">Anmelden</a></li>
+</ul>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10">Die Schnurlostelefone (DECT) können so eingerichtet werden, dass sie auf alle eingehenden Anrufe reagieren. Durch das Setzen dieser Option gehen alle Rufnummernzuordnungen verloren.</p>
+<p class="mb10"><input type="checkbox" id="uiViewRingOnAllMSNs" onclick="uiRingOnAllMSNs()">&nbsp;<label for="uiViewRingOnAllMSNs">Auf alle Rufnummern reagieren</label></p>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+<p class="mb10">Ordnen Sie den bis zu fünf  MSNs Rufnummern und Schnurlostelefone (DECT) zu, die für abgehende Anrufe verwendet werden können.</p>
+<table id="tMSN" class="tborder">
+<tr>
+<th class="c1">MSN</th>
+<th class="c2">Rufnummer</th>
+<th class="c3">Anonym</th>
+<th class="c4">Anklopfen</th>
+<th class="c5">MSN besetzt</th>
+<th class="c6">DECT Zugeordnet</th>
+<th class="c7"></th>
+<th class="c8"></th>
+</tr>	
+<? repeat [ 0 4 ] '
+<tr id="uiViewMSN$0" style="display:none">
+<td class="c1"><option value="$0"><script type="text/javascript">document.write(uiIndexMSN("$0"));</script></option></td>
+<td class="c2"><? query dect:settings/MSN$0/MSN ?></td>
+<td class="c3"><input type="checkbox" id="uiViewCLIR$0" disabled></td>
+<td class="c4"><input type="checkbox" id="uiViewCallWaiting$0" disabled></td>
+<td class="c5"><input type="checkbox" id="uiViewBusyOnBusy$0" disabled></td>
+<td class="c6"><script type="text/javascript">document.write(uiListHandsets("<? query dect:settings/MSN$0/Handsets ?>"));</script></td>
+<td class="c7"><button type="button" id="uiViewEdit$0" onclick="uiEditMSN($0)" title="Zuordnung ändern" style="width: 30px">
+<img src="../html/de/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
+</button></td>
+<td class="c8"><button type="button" id="uiViewDelete$0" onclick="uiDeleteMSN($0)" title="Zuordnung löschen" style="width: 30px">
+<img src="../html/de/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
+</button></td>
+</tr>
+' ?>
+<tr id="uiNichts" style="display:none"><td colspan=5 class="ac">Es sind keine MSNs eingerichtet</td></tr>
+</table>
+<p class="mt10 ar"><input type="button" value="Neue Zuordnung" id="uiViewNew" onclick="uiNewMSN()" class="Pushbutton" style="width:180px;"></p>
+</div></div></div></div></div></div>
+<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
+</div></div></div></div></div></div>
+</div></div></div></div></div></div></div>
+</div>
--- fon/fonsetupdect.js	2008-01-01 19:00:00.000000000 -0500
+++ fon/fonsetupdect.js	2008-08-15 11:40:31.000000000 -0400
@@ -0,0 +1,126 @@
+<!--		../fon/fonsetupdect.js		-->
+<style type="text/css">
+<!--
+#content {width: 560px; margin: auto;}
+#tMSN {width: 100%;}
+#tMSN td {padding: 2px 3px;}
+#tMSN th {padding: 2px 3px;}
+#tMSN .c1 {text-align: center}
+#tMSN .c2 {text-align: left}
+#tMSN .c3 {text-align: center}
+#tMSN .c4 {text-align: center}
+#tMSN .c5 {text-align: center}
+#tMSN .c6 {text-align: left}
+#tMSN .c7, #tMSN .c8 {width: 30px;}
+.mt10 {margin-top: 10px;}
+.ar {text-align: right;}
+.ac {text-align: center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/de/js/jsl.js ?>
+var g_mldDelete	= "Wollen Sie diese Zuordnung löschen ?";
+var g_mldAllOn	= "Wollen Sie alle bestehenden Zuordnungen löschen ?";
+var g_New = -1;
+var g_Index = new Array("A", "B", "C", "D", "E");
+var g_Handsets;
+function uiDoOnLoad() {
+g_Handsets = 0;
+
+<? multiquery dect:settings/Handset/list(Subscribed) `
+<? if eq $2 1 `
+g_Handsets |= (1<<$0);
+` ?>
+` ?>
+
+jslSetChecked("uiViewRingOnAllMSNs", jslGetValue("uiPostRingOnAllMSNs") == "1");
+jslSetEnabled("uiViewNew", jslGetValue("uiPostRingOnAllMSNs") != "1");
+
+var bFound = false;
+for (var i=0; i<5; i++) {
+if (jslGetValue("uiPostMSN"+i) != "") {
+jslSetChecked("uiViewCLIR"+i, jslGetValue("uiPostCLIR"+i) == "1");
+jslSetChecked("uiViewCallWaiting"+i, jslGetValue("uiPostCallWaiting"+i) == "1");
+jslSetChecked("uiViewBusyOnBusy"+i, jslGetValue("uiPostBusyOnBusy"+i) == "1");
+jslDisplay("uiViewMSN"+i, true); bFound=true;
+} else {
+jslDisable("uiViewEdit"+i)
+jslDisable("uiViewDelete"+i)
+if (g_New == -1) g_New = i;
+}
+}
+jslDisplay("uiNichts", !bFound);
+if (g_New == -1) jslDisable("uiViewNew");
+jslZebrastreifen("tMSN");
+}
+function uiDoHelp() {
+jslPopHelp("hilfe_fon_setupdect");
+}
+function uiDoCancel() {
+jslGoTo("", "");
+}
+function uiDoRefresh() {
+jslGoTo("fon", "fonsetupdect");
+}
+function uiDoDect() {
+jslGoTo("fon", "dect0");
+}
+function uiDoListDect() {
+jslGoTo("fon", "fonlistdect");
+}
+function uiDoEditDect() {
+jslGoTo("fon", "foneditdect");
+}
+function uiEditMSN(nr) {
+jslCopyValue("uiPostPageMaster", "uiPostPageName");
+jslSetValue("uiPostMsnNr", nr);
+jslSubmitFormEx("fon", "fon1dect", jslGetValue("uiPostPageName"));
+}
+function uiDeleteMSN(nr) {
+if (!confirm(g_mldDelete)) return;
+jslSetValue("uiPostMSN"+nr, "");
+jslEnable("uiPostMSN"+nr);
+jslSubmitFormEx("fon", "", "");
+}
+function uiNewMSN() {
+jslCopyValue("uiPostPageMaster", "uiPostPageName");
+jslSetValue("uiPostMsnNr", g_New);
+jslSubmitFormEx("fon", "fon1dect", jslGetValue("uiPostPageName"));
+}
+function uiRingOnAllMSNs() {
+var bFound = false;
+if (jslGetChecked("uiViewRingOnAllMSNs")) {
+for (var j=0; j<5; j++) {
+if (jslGetValue("uiPostMSN"+j) != "") bFound=true;
+}
+if (bFound) {
+if (!confirm(g_mldAllOn)) {
+jslSetChecked("uiViewRingOnAllMSNs", false);
+return;
+} 
+for (var i=0; i<5; i++) {
+jslSetValue("uiPostMSN"+i, "");
+jslEnable("uiPostMSN"+i);
+}
+}
+}
+jslSetValue("uiPostRingOnAllMSNs", jslGetChecked("uiViewRingOnAllMSNs") ? "1":"0");
+jslEnable("uiPostRingOnAllMSNs");
+jslSubmitFormEx("fon", "", "");
+}
+function uiIndexMSN(nr) {
+return g_Index[Number(nr)];
+}
+var g_Sequence = new Array("1", ",2", ",3", ",4", ",5", ",6 ");
+function uiListHandsets(bitset) {
+var bitset = (bitset.charCodeAt(0) - 48);
+var bits = Number(bitset);
+var list = "";
+for (var j=0; j<6; j++) {
+//if (bits & g_Handsets & (1<<j) != 0)	list += g_Sequence[j];
+if ((bits & (1<<j)) != 0) {list += g_Sequence[j];
+}else {list += "  ";}
+} 
+return list;
+}
+</script>
